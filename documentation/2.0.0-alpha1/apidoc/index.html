<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><link href="css/docs.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Immutant 2.0.0-alpha1 API documentation</title></head><body><div id="header"><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 2.0.0-alpha1</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant</span></div></div></li><li class="depth-2"><a href="immutant.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-3 branch"><a href="immutant.caching.core-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-cache</span></div></a></li><li class="depth-3"><a href="immutant.caching.core-memoize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-memoize</span></div></a></li><li class="depth-2 branch"><a href="immutant.codecs.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-2 branch"><a href="immutant.coercions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coercions</span></div></a></li><li class="depth-2 branch"><a href="immutant.daemons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemons</span></div></a></li><li class="depth-2"><a href="immutant.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="immutant.messaging.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-3"><a href="immutant.messaging.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-2"><a href="immutant.scheduling.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>scheduling</span></div></a></li><li class="depth-3"><a href="immutant.scheduling.joda.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda</span></div></a></li><li class="depth-2 branch"><a href="immutant.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="immutant.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-3"><a href="immutant.web.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li><li class="depth-2"><a href="immutant.wildfly.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>wildfly</span></div></a></li></ul></div><div class="namespace-index" id="content"><h2>Immutant 2.0.0-alpha1</h2><div class="doc">The public API for Immutant.</div><div class="namespace"><h3><a href="immutant.caching.html">immutant.caching</a></h3><div class="doc"><p>Create, manage and manipulate <a href='http://infinispan.org'>Infinispan</a> caches in a data grid</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.caching.html#var-builder">builder</a></li><li><a href="immutant.caching.html#var-cache">cache</a></li><li><a href="immutant.caching.html#var-compare-and-swap.21">compare-and-swap!</a></li><li><a href="immutant.caching.html#var-exists.3F">exists?</a></li><li><a href="immutant.caching.html#var-stop">stop</a></li><li><a href="immutant.caching.html#var-with-codec">with-codec</a></li><li><a href="immutant.caching.html#var-with-expiration">with-expiration</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.caching.core-cache.html">immutant.caching.core-cache</a></h3><div class="doc"><p>Require this to extend <code>org.infinispan.Cache</code> to the <a href='https://github.com/clojure/core.cache'>core.cache</a> <code>CacheProtocol</code></p></div><div class="index"><p>Public variables and functions:</p><ul></ul></div></div><div class="namespace"><h3><a href="immutant.caching.core-memoize.html">immutant.caching.core-memoize</a></h3><div class="doc"><p>Use an Infinispan cache as a <code>PluggableMemoization</code> from <a href='https://github.com/clojure/core.memoize'>core.memoize</a></p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.caching.core-memoize.html#var-memo">memo</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.codecs.html">immutant.codecs</a></h3><div class="doc"><p>Common codecs used when [de]serializing data structures.</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.codecs.html#var-codec-set">codec-set</a></li><li><a href="immutant.codecs.html#var-decode">decode</a></li><li><a href="immutant.codecs.html#var-encode">encode</a></li><li><a href="immutant.codecs.html#var-make-codec">make-codec</a></li><li><a href="immutant.codecs.html#var-register-codec.21">register-codec!</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.coercions.html">immutant.coercions</a></h3><div class="doc"><p>Defines <code><a href="immutant.coercions.html#var-AsPeriod">AsPeriod</a></code> and <code><a href="immutant.coercions.html#var-AsTime">AsTime</a></code> protocols for schedule specifications</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.coercions.html#var-AsPeriod">AsPeriod</a></li><li><a href="immutant.coercions.html#var-AsTime">AsTime</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.daemons.html">immutant.daemons</a></h3><div class="doc"><p>Asynchronous, highly-available services that share the lifecycle of your application.</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.daemons.html#var-singleton-daemon">singleton-daemon</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.messaging.html">immutant.messaging</a></h3><div class="doc"><p>Easily publish and receive messages containing any type of nested data structure to dynamically-created queues and topics.</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.messaging.html#var-connection">connection</a></li><li><a href="immutant.messaging.html#var-listen">listen</a></li><li><a href="immutant.messaging.html#var-publish">publish</a></li><li><a href="immutant.messaging.html#var-queue">queue</a></li><li><a href="immutant.messaging.html#var-receive">receive</a></li><li><a href="immutant.messaging.html#var-request">request</a></li><li><a href="immutant.messaging.html#var-respond">respond</a></li><li><a href="immutant.messaging.html#var-session">session</a></li><li><a href="immutant.messaging.html#var-stop">stop</a></li><li><a href="immutant.messaging.html#var-subscribe">subscribe</a></li><li><a href="immutant.messaging.html#var-topic">topic</a></li><li><a href="immutant.messaging.html#var-unsubscribe">unsubscribe</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.messaging.hornetq.html">immutant.messaging.hornetq</a></h3><div class="doc"><p>Utilities specific to <a href='http://hornetq.jboss.org/'>HornetQ</a></p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.messaging.hornetq.html#var-destination-controller">destination-controller</a></li><li><a href="immutant.messaging.hornetq.html#var-server-manager">server-manager</a></li><li><a href="immutant.messaging.hornetq.html#var-set-address-options">set-address-options</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.messaging.pipeline.html">immutant.messaging.pipeline</a></h3><div class="doc"><p>Provides functions for creating and managing pipelines. A pipeline is a composition of functions ("steps"), where each function is passed the result of the previous function, dereferenced if needed. It is built on top of Immutant's messaging subsystem, allowing each step to have multiple processing threads, and to be automatically load balanced across a cluster.</p><p>The <code><a href="immutant.messaging.pipeline.html#var-pipeline">pipeline</a></code> function takes a unique (within the scope of the application) name, one or more single-arity functions, and optional kwarg options, returning a function that places its argument onto the pipeline when called. The resulting pipeline-fn optionally returns a delay that can be used to retrieve the result of the pipeline execution.</p><p>Each function can be optionally be wrapped with metadata that provides options for how that particular function is handled (see the 'step' fn below).</p><p>Example:</p><pre>
&#40;require '&#91;immutant.pipeline <code>:as</code> pl&#93;&#41;

&#40;defn calculate-foo &#91;m&#93;
  ...
  &#40;assoc m <code>:foo</code> value&#41;&#41;

&#40;defn save-data &#91;m&#93;
  ...&#41;

;; create a pipeline
&#40;defonce foo-pipeline
  &#40;pl/pipeline &quot;foo&quot; ;; pipelines must be named
    &#40;pl/step calculate-foo <code>:concurrency</code> 5&#41; ;; run this step with 5 threads
    &#40;pl/step #&#40;update-in % &#91;<code>:bar</code>&#93; + &#40;<code>:foo</code> %&#41;&#41; <code>:name</code> <code>:update-bar</code>&#41; ;; give this step a name
    save-data ;; a 'vanilla' step
    <code>:concurrency</code> 2 ;; run all steps with 2 threads &#40;unless overridden&#41;
    <code>:error-handler</code> &#40;fn &#91;ex m&#93; ;; do something special with errors, and retry
                     ...
                     &#40;pl/&#42;pipeline&#42; m <code>:step</code> &#42;current-step&#42;&#41;&#41;&#41;&#41;

;; put data onto the front pipeline
&#40;foo-pipeline {<code>:bar</code> 1 <code>:ham</code> &quot;biscuit&quot;}&#41;

;; put data onto the pipeline at a given step
&#40;foo-pipeline {<code>:bar</code> 1 <code>:foo</code> 42 <code>:ham</code> &quot;gravy&quot;} <code>:step</code> <code>:update-bar</code>&#41;

;; get the result
&#40;deref &#40;foo-pipeline {<code>:bar</code> 1 <code>:ham</code> &quot;biscuit&quot;}&#41; 1000 <code>::timeout</code>!&#41;

;; optional - it will automatically be stopped on undeploy
&#40;pl/stop foo-pipeline&#41;
</pre></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.messaging.pipeline.html#var-*current-step*">*current-step*</a></li><li><a href="immutant.messaging.pipeline.html#var-*next-step*">*next-step*</a></li><li><a href="immutant.messaging.pipeline.html#var-*pipeline*">*pipeline*</a></li><li><a href="immutant.messaging.pipeline.html#var-fanout">fanout</a></li><li><a href="immutant.messaging.pipeline.html#var-halt">halt</a></li><li><a href="immutant.messaging.pipeline.html#var-pipeline">pipeline</a></li><li><a href="immutant.messaging.pipeline.html#var-step">step</a></li><li><a href="immutant.messaging.pipeline.html#var-stop">stop</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.scheduling.html">immutant.scheduling</a></h3><div class="doc"><p>Schedule jobs for execution</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.scheduling.html#var-at">at</a></li><li><a href="immutant.scheduling.html#var-cron">cron</a></li><li><a href="immutant.scheduling.html#var-every">every</a></li><li><a href="immutant.scheduling.html#var-id">id</a></li><li><a href="immutant.scheduling.html#var-in">in</a></li><li><a href="immutant.scheduling.html#var-limit">limit</a></li><li><a href="immutant.scheduling.html#var-schedule">schedule</a></li><li><a href="immutant.scheduling.html#var-singleton">singleton</a></li><li><a href="immutant.scheduling.html#var-stop">stop</a></li><li><a href="immutant.scheduling.html#var-until">until</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.scheduling.joda.html">immutant.scheduling.joda</a></h3><div class="doc"><p>Adapts the <a href='https://github.com/clj-time/clj-time'>clj-time</a> library, which must be included among your app's dependencies to load this namespace</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.scheduling.joda.html#var-schedule-seq">schedule-seq</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.util.html">immutant.util</a></h3><div class="doc"><p>Various utility functions.</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.util.html#var-app-name">app-name</a></li><li><a href="immutant.util.html#var-app-relative">app-relative</a></li><li><a href="immutant.util.html#var-app-root">app-root</a></li><li><a href="immutant.util.html#var-at-exit">at-exit</a></li><li><a href="immutant.util.html#var-classpath">classpath</a></li><li><a href="immutant.util.html#var-dev-mode.3F">dev-mode?</a></li><li><a href="immutant.util.html#var-http-port">http-port</a></li><li><a href="immutant.util.html#var-in-cluster.3F">in-cluster?</a></li><li><a href="immutant.util.html#var-in-container.3F">in-container?</a></li><li><a href="immutant.util.html#var-messaging-remoting-port">messaging-remoting-port</a></li><li><a href="immutant.util.html#var-reset">reset</a></li><li><a href="immutant.util.html#var-reset-fixture">reset-fixture</a></li><li><a href="immutant.util.html#var-set-bean-property">set-bean-property</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.html">immutant.web</a></h3><div class="doc"><p>Serve web requests using Ring handlers, Servlets, or Undertow HttpHandlers</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.html#var-run">run</a></li><li><a href="immutant.web.html#var-run-dmc">run-dmc</a></li><li><a href="immutant.web.html#var-stop">stop</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.middleware.html">immutant.web.middleware</a></h3><div class="doc"><p>Ring middleware useful with immutant.web</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.middleware.html#var-wrap-development">wrap-development</a></li><li><a href="immutant.web.middleware.html#var-wrap-session">wrap-session</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.undertow.html">immutant.web.undertow</a></h3><div class="doc"><p>Advanced options specific to the Undertow web server used by Immutant</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.undertow.html#var-builder">builder</a></li><li><a href="immutant.web.undertow.html#var-options">options</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.websocket.html">immutant.web.websocket</a></h3><div class="doc"><p>Provides for the creation of asynchronous WebSocket services</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.websocket.html#var-Channel">Channel</a></li><li><a href="immutant.web.websocket.html#var-Handshake">Handshake</a></li><li><a href="immutant.web.websocket.html#var-wrap-websocket">wrap-websocket</a></li></ul></div></div><div class="namespace"><h3><a href="immutant.wildfly.html">immutant.wildfly</a></h3><div class="doc"><p>Utility functions only useful within a <a href='http://wildfly.org/'>WildFly</a> container.</p></div><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.wildfly.html#var-app-uri">app-uri</a></li><li><a href="immutant.wildfly.html#var-context-path">context-path</a></li><li><a href="immutant.wildfly.html#var-get-from-service-registry">get-from-service-registry</a></li><li><a href="immutant.wildfly.html#var-hornetq-remoting-port">hornetq-remoting-port</a></li><li><a href="immutant.wildfly.html#var-http-port">http-port</a></li><li><a href="immutant.wildfly.html#var-in-cluster">in-cluster</a></li><li><a href="immutant.wildfly.html#var-in-cluster.3F">in-cluster?</a></li><li><a href="immutant.wildfly.html#var-module-class-loader-class">module-class-loader-class</a></li><li><a href="immutant.wildfly.html#var-port">port</a></li></ul></div></div></div></body></html>