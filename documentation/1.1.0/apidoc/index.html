<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Immutant 1.1.0 API documentation</title></head><body><div id="header"><h2><a href="../index.html">Immutant Manual</a></h2><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 1.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="immutant.cache.html"><span>immutant.cache</span></a></li><li><a href="immutant.cache.core.html"><span>immutant.cache.core</span></a></li><li><a href="immutant.codecs.html"><span>immutant.codecs</span></a></li><li><a href="immutant.daemons.html"><span>immutant.daemons</span></a></li><li><a href="immutant.dev.html"><span>immutant.dev</span></a></li><li><a href="immutant.jobs.html"><span>immutant.jobs</span></a></li><li><a href="immutant.messaging.html"><span>immutant.messaging</span></a></li><li><a href="immutant.messaging.hornetq.html"><span>immutant.messaging.hornetq</span></a></li><li><a href="immutant.pipeline.html"><span>immutant.pipeline</span></a></li><li><a href="immutant.registry.html"><span>immutant.registry</span></a></li><li><a href="immutant.repl.html"><span>immutant.repl</span></a></li><li><a href="immutant.util.html"><span>immutant.util</span></a></li><li><a href="immutant.web.html"><span>immutant.web</span></a></li><li><a href="immutant.web.session.html"><span>immutant.web.session</span></a></li><li><a href="immutant.xa.html"><span>immutant.xa</span></a></li><li><a href="immutant.xa.transaction.html"><span>immutant.xa.transaction</span></a></li></ul></div><div class="namespace-index" id="content"><h2>Immutant 1.1.0 API documentation</h2><div class="doc">The public API for Immutant.</div><div class="namespace"><h3><a href="immutant.cache.html"><span>immutant.cache</span></a></h3><pre class="doc">Infinispan-backed implementations of core.cache and core.memoize
protocols supporting multiple replication options and more.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.cache.html#var-Mutable"><span class="">Mutable</span></a></li><li><a href="immutant.cache.html#var-delete"><span class="protocol">delete</span></a></li><li><a href="immutant.cache.html#var-delete-all"><span class="protocol">delete-all</span></a></li><li><a href="immutant.cache.html#var-put"><span class="protocol">put</span></a></li><li><a href="immutant.cache.html#var-put-all"><span class="protocol">put-all</span></a></li><li><a href="immutant.cache.html#var-put-if-absent"><span class="protocol">put-if-absent</span></a></li><li><a href="immutant.cache.html#var-put-if-present"><span class="protocol">put-if-present</span></a></li><li><a href="immutant.cache.html#var-put-if-replace"><span class="protocol">put-if-replace</span></a></li><li><a href="immutant.cache.html#var-create"><span class="">create</span></a></li><li><a href="immutant.cache.html#var-lookup"><span class="">lookup</span></a></li><li><a href="immutant.cache.html#var-lookup-or-create"><span class="">lookup-or-create</span></a></li><li><a href="immutant.cache.html#var-memo"><span class="">memo</span></a></li><li><a href="immutant.cache.html#var-swap%21"><span class="">swap!</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.cache.core.html"><span>immutant.cache.core</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.cache.core.html#var-builder"><span class="">builder</span></a></li><li><a href="immutant.cache.core.html#var-get-cache"><span class="">get-cache</span></a></li><li><a href="immutant.cache.core.html#var-start"><span class="">start</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.codecs.html"><span>immutant.codecs</span></a></h3><pre class="doc">Common codecs used when [de]serializing data structures.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.codecs.html#var-decode"><span class="">decode</span></a></li><li><a href="immutant.codecs.html#var-encode"><span class="">encode</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.daemons.html"><span>immutant.daemons</span></a></h3><pre class="doc">Asynchronous, highly-available services that share the lifecycle of
your application</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.daemons.html#var-Daemon"><span class="">Daemon</span></a></li><li><a href="immutant.daemons.html#var-start"><span class="protocol">start</span></a></li><li><a href="immutant.daemons.html#var-stop"><span class="protocol">stop</span></a></li><li><a href="immutant.daemons.html#var-create"><span class="">create</span></a></li><li><a href="immutant.daemons.html#var-daemonize"><span class="">daemonize</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.dev.html"><span>immutant.dev</span></a></h3><pre class="doc">Functions useful for repl based development inside an Immutant container. They
shouldn't be used in production.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.dev.html#var-add-dependencies%21"><span class="">add-dependencies!</span></a></li><li><a href="immutant.dev.html#var-current-project"><span class="">current-project</span></a></li><li><a href="immutant.dev.html#var-reload-project%21"><span class="">reload-project!</span></a></li><li><a href="immutant.dev.html#var-remove-lib"><span class="">remove-lib</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.jobs.html"><span>immutant.jobs</span></a></h3><pre class="doc">Associate recurring jobs with an application using cron-like and at-style specifications
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.jobs.html#var-*job-execution-context*"><span class="">*job-execution-context*</span></a></li><li><a href="immutant.jobs.html#var-internal-scheduler"><span class="">internal-scheduler</span></a></li><li><a href="immutant.jobs.html#var-schedule"><span class="">schedule</span></a></li><li><a href="immutant.jobs.html#var-unschedule"><span class="">unschedule</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.messaging.html"><span>immutant.messaging</span></a></h3><pre class="doc">Easily publish and receive messages containing any type of nested
data structure to dynamically-created topics and queues. Message
distribution is automatically load-balanced when clustered.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.messaging.html#var-*raw-message*"><span class="">*raw-message*</span></a></li><li><a href="immutant.messaging.html#var-as-queue"><span class="">as-queue</span></a></li><li><a href="immutant.messaging.html#var-as-topic"><span class="">as-topic</span></a></li><li><a href="immutant.messaging.html#var-listen"><span class="">listen</span></a></li><li><a href="immutant.messaging.html#var-message-seq"><span class="">message-seq</span></a></li><li><a href="immutant.messaging.html#var-publish"><span class="">publish</span></a></li><li><a href="immutant.messaging.html#var-receive"><span class="">receive</span></a></li><li><a href="immutant.messaging.html#var-request"><span class="">request</span></a></li><li><a href="immutant.messaging.html#var-respond"><span class="">respond</span></a></li><li><a href="immutant.messaging.html#var-start"><span class="">start</span></a></li><li><a href="immutant.messaging.html#var-stop"><span class="">stop</span></a></li><li><a href="immutant.messaging.html#var-unlisten"><span class="">unlisten</span></a></li><li><a href="immutant.messaging.html#var-unsubscribe"><span class="">unsubscribe</span></a></li><li><a href="immutant.messaging.html#var-with-connection"><span class="">with-connection</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.messaging.hornetq.html"><span>immutant.messaging.hornetq</span></a></h3><pre class="doc">HornetQ specific messaging functionality.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.messaging.hornetq.html#var-destination-controller"><span class="">destination-controller</span></a></li><li><a href="immutant.messaging.hornetq.html#var-set-address-options"><span class="">set-address-options</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.pipeline.html"><span>immutant.pipeline</span></a></h3><pre class="doc">Provides functions for creating and managing pipelines. A pipeline
is a composition of functions (&quot;steps&quot;), where each function is
passed the result of the previous function, dereferenced if needed.
It is built on top of Immutant's messaging subsystem, allowing each
step to have multiple processing threads, and to be automatically
load balanced across a cluster.

The `pipeline` function takes a unique (within the scope of the
application) name, one or more single-arity functions, and optional
kwarg options, returning a function that places its argument onto
the pipeline when called. The resulting pipeline-fn optionally
returns a delay that can be used to retrieve the result of the
pipeline execution.

Each function can be optionally be wrapped with metadata that
provides options for how that particular function is handled (see
the 'step' fn below).

Example:

(require '[immutant.pipeline :as pl])

(defn calculate-foo [m]
  ...
  (assoc m :foo value))

(defn save-data [m]
  ...)

;; create a pipeline
(defonce foo-pipeline
  (pl/pipeline &quot;foo&quot; ;; pipelines must be named
    (pl/step calculate-foo :concurrency 5) ;; run this step with 5 threads
    (pl/step #(update-in % [:bar] + (:foo %)) :name :update-bar) ;; give this step a name
    save-data ;; a 'vanilla' step
    :concurrency 2 ;; run all steps with 2 threads (unless overridden)
    :error-handler (fn [ex m] ;; do something special with errors, and retry
                     ...
                     (pl/*pipeline* m :step *current-step*))))

;; put data onto the front pipeline
(foo-pipeline {:bar 1 :ham &quot;biscuit&quot;})

;; put data onto the pipeline at a given step
(foo-pipeline {:bar 1 :foo 42 :ham &quot;gravy&quot;} :step :update-bar)

;; get the result
(deref (foo-pipeline {:bar 1 :ham &quot;biscuit&quot;}) 1000 ::timeout!)

;; optional - it will automatically be stopped on undeploy
(pl/stop foo-pipeline)</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.pipeline.html#var-*current-step*"><span class="">*current-step*</span></a></li><li><a href="immutant.pipeline.html#var-*next-step*"><span class="">*next-step*</span></a></li><li><a href="immutant.pipeline.html#var-*pipeline*"><span class="">*pipeline*</span></a></li><li><a href="immutant.pipeline.html#var-fanout"><span class="">fanout</span></a></li><li><a href="immutant.pipeline.html#var-halt"><span class="">halt</span></a></li><li><a href="immutant.pipeline.html#var-pipeline"><span class="">pipeline</span></a></li><li><a href="immutant.pipeline.html#var-step"><span class="">step</span></a></li><li><a href="immutant.pipeline.html#var-stop"><span class="">stop</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.registry.html"><span>immutant.registry</span></a></h3><pre class="doc">Functions for working with Immutant's internal per-app registry.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.registry.html#var-get"><span class="">get</span></a></li><li><a href="immutant.registry.html#var-keys"><span class="">keys</span></a></li><li><a href="immutant.registry.html#var-put"><span class="">put</span></a></li><li><a href="immutant.registry.html#var-service-names"><span class="">service-names</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.repl.html"><span>immutant.repl</span></a></h3><pre class="doc">Provides tools for starting nrepl servers.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.repl.html#var-start-nrepl"><span class="">start-nrepl</span></a></li><li><a href="immutant.repl.html#var-stop-nrepl"><span class="">stop-nrepl</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.util.html"><span>immutant.util</span></a></h3><pre class="doc">Various utility functions.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.util.html#var-app-name"><span class="">app-name</span></a></li><li><a href="immutant.util.html#var-app-relative"><span class="">app-relative</span></a></li><li><a href="immutant.util.html#var-app-root"><span class="">app-root</span></a></li><li><a href="immutant.util.html#var-app-uri"><span class="">app-uri</span></a></li><li><a href="immutant.util.html#var-at-exit"><span class="">at-exit</span></a></li><li><a href="immutant.util.html#var-backoff"><span class="">backoff</span></a></li><li><a href="immutant.util.html#var-classpath"><span class="">classpath</span></a></li><li><a href="immutant.util.html#var-context-path"><span class="">context-path</span></a></li><li><a href="immutant.util.html#var-dev-mode%3F"><span class="">dev-mode?</span></a></li><li><a href="immutant.util.html#var-hornetq-remoting-port"><span class="">hornetq-remoting-port</span></a></li><li><a href="immutant.util.html#var-http-port"><span class="">http-port</span></a></li><li><a href="immutant.util.html#var-in-immutant%3F"><span class="">in-immutant?</span></a></li><li><a href="immutant.util.html#var-lookup-interface-address"><span class="">lookup-interface-address</span></a></li><li><a href="immutant.util.html#var-management-interface-address"><span class="">management-interface-address</span></a></li><li><a href="immutant.util.html#var-maybe-deref"><span class="">maybe-deref</span></a></li><li><a href="immutant.util.html#var-port"><span class="">port</span></a></li><li><a href="immutant.util.html#var-profile-active%3F"><span class="">profile-active?</span></a></li><li><a href="immutant.util.html#var-public-interface-address"><span class="">public-interface-address</span></a></li><li><a href="immutant.util.html#var-set-bean-property"><span class="">set-bean-property</span></a></li><li><a href="immutant.util.html#var-try-import"><span class="">try-import</span></a></li><li><a href="immutant.util.html#var-try-resolve"><span class="">try-resolve</span></a></li><li><a href="immutant.util.html#var-try-resolve-any"><span class="">try-resolve-any</span></a></li><li><a href="immutant.util.html#var-unsecure-interface-address"><span class="">unsecure-interface-address</span></a></li><li><a href="immutant.util.html#var-wait-for"><span class="">wait-for</span></a></li><li><a href="immutant.util.html#var-wait-for-start"><span class="">wait-for-start</span></a></li><li><a href="immutant.util.html#var-waiting-derefable"><span class="">waiting-derefable</span></a></li><li><a href="immutant.util.html#var-when-import"><span class="">when-import</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.html"><span>immutant.web</span></a></h3><pre class="doc">Associate one or more Ring handlers with your application, mounted
at unique context paths</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.html#var-current-servlet-request"><span class="">current-servlet-request</span></a></li><li><a href="immutant.web.html#var-start"><span class="">start</span></a></li><li><a href="immutant.web.html#var-start-handler"><span class="">start-handler</span></a></li><li><a href="immutant.web.html#var-start-servlet"><span class="">start-servlet</span></a></li><li><a href="immutant.web.html#var-stop"><span class="">stop</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.web.session.html"><span>immutant.web.session</span></a></h3><pre class="doc">Functions for using the cluster-wide servlet store for sessions.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.web.session.html#var-servlet-session"><span class="">servlet-session</span></a></li><li><a href="immutant.web.session.html#var-servlet-store"><span class="">servlet-store</span></a></li><li><a href="immutant.web.session.html#var-session-cookie-attributes"><span class="">session-cookie-attributes</span></a></li><li><a href="immutant.web.session.html#var-session-timeout"><span class="">session-timeout</span></a></li><li><a href="immutant.web.session.html#var-set-session-cookie-attributes%21"><span class="">set-session-cookie-attributes!</span></a></li><li><a href="immutant.web.session.html#var-set-session-timeout%21"><span class="">set-session-timeout!</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.xa.html"><span>immutant.xa</span></a></h3><pre class="doc">Distributed XA transactional support
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.xa.html#var-datasource"><span class="">datasource</span></a></li><li><a href="immutant.xa.html#var-transaction"><span class="">transaction</span></a></li><li><a href="immutant.xa.html#var-wrap"><span class="">wrap</span></a></li></ul></div></div><div class="namespace"><h3><a href="immutant.xa.transaction.html"><span>immutant.xa.transaction</span></a></h3><pre class="doc">Fine-grained XA transactional control
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="immutant.xa.transaction.html#var-active%3F"><span class="">active?</span></a></li><li><a href="immutant.xa.transaction.html#var-after-completion"><span class="">after-completion</span></a></li><li><a href="immutant.xa.transaction.html#var-available%3F"><span class="">available?</span></a></li><li><a href="immutant.xa.transaction.html#var-begin"><span class="">begin</span></a></li><li><a href="immutant.xa.transaction.html#var-current"><span class="">current</span></a></li><li><a href="immutant.xa.transaction.html#var-enlist"><span class="">enlist</span></a></li><li><a href="immutant.xa.transaction.html#var-mandatory"><span class="">mandatory</span></a></li><li><a href="immutant.xa.transaction.html#var-never"><span class="">never</span></a></li><li><a href="immutant.xa.transaction.html#var-not-supported"><span class="">not-supported</span></a></li><li><a href="immutant.xa.transaction.html#var-required"><span class="">required</span></a></li><li><a href="immutant.xa.transaction.html#var-requires-new"><span class="">requires-new</span></a></li><li><a href="immutant.xa.transaction.html#var-set-rollback-only"><span class="">set-rollback-only</span></a></li><li><a href="immutant.xa.transaction.html#var-supports"><span class="">supports</span></a></li><li><a href="immutant.xa.transaction.html#var-suspend"><span class="">suspend</span></a></li></ul></div></div></div></body></html>