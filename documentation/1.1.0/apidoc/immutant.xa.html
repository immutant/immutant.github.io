<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>immutant.xa documentation</title></head><body><div id="header"><h2><a href="../index.html">Immutant Manual</a></h2><h2><a href="http://immutant.org/">Immutant Home</a></h2><h1><a href="index.html">Immutant 1.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="immutant.cache.html"><span>immutant.cache</span></a></li><li><a href="immutant.cache.core.html"><span>immutant.cache.core</span></a></li><li><a href="immutant.codecs.html"><span>immutant.codecs</span></a></li><li><a href="immutant.daemons.html"><span>immutant.daemons</span></a></li><li><a href="immutant.dev.html"><span>immutant.dev</span></a></li><li><a href="immutant.jobs.html"><span>immutant.jobs</span></a></li><li><a href="immutant.messaging.html"><span>immutant.messaging</span></a></li><li><a href="immutant.messaging.hornetq.html"><span>immutant.messaging.hornetq</span></a></li><li><a href="immutant.pipeline.html"><span>immutant.pipeline</span></a></li><li><a href="immutant.registry.html"><span>immutant.registry</span></a></li><li><a href="immutant.repl.html"><span>immutant.repl</span></a></li><li><a href="immutant.util.html"><span>immutant.util</span></a></li><li><a href="immutant.web.html"><span>immutant.web</span></a></li><li><a href="immutant.web.session.html"><span>immutant.web.session</span></a></li><li class="current"><a href="immutant.xa.html"><span>immutant.xa</span></a></li><li><a href="immutant.xa.transaction.html"><span>immutant.xa.transaction</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="immutant.xa.html#var-datasource"><span class="">datasource</span></a></li><li><a href="immutant.xa.html#var-transaction"><span class="">transaction</span></a></li><li><a href="immutant.xa.html#var-wrap"><span class="">wrap</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>immutant.xa documentation</h2><pre class="doc">Distributed XA transactional support
</pre><div class="public " id="var-datasource"><h3>datasource</h3><div class="usage"><code>(datasource id spec)</code></div><pre class="doc">Create an XA-capable datasource named by 'id'. The result can be
associated with the :datasource key in a clojure.java.jdbc spec,
e.g.

  (defonce ds (immutant.xa/datasource &quot;myds&quot; {...}))
  (clojure.java.jdbc/with-connection {:datasource ds} ...)

The spec map keys are adapter-specific, but all should support the
following:
 :adapter   one of h2|oracle|mysql|postgres|mssql (required)
 :host      the host on which the database server is running [localhost]
 :port      the port on which the server is listening [adapter-specific]
 :database  the database name
 :username  the username for the database connection
 :password  the password associated with the username
 :pool      the maximum number of simultaneous connections used
 :url       a jdbc connection url (not supported by all adapters)

 :subprotocol an alias for :adapter
 :subname     an alias for :database
 :user        an alias for :username</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/1.1.0//modules/xa/src/main/clojure/immutant/xa.clj#L38">Source</a></div></div><div class="public " id="var-transaction"><h3>transaction</h3><h4 class="type">macro</h4><div class="usage"><code>(transaction &amp; body)</code></div><pre class="doc">Execute body within the current transaction, if available,
 otherwise invoke body within a new transaction.

This is really just a convenient alias for
immutant.xa.transaction/required, which is the default behavior for
transactions in standard JEE containers. See the macros in
immutant.xa.transaction for finer-grained transactional control
corresponding to all the analogous attributes of the JEE @Transaction
annotation.</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/1.1.0//modules/xa/src/main/clojure/immutant/xa.clj#L70">Source</a></div></div><div class="public " id="var-wrap"><h3>wrap</h3><div class="usage"><code>(wrap ds-or-spec)</code></div><pre class="doc">Wrap a DataSource (or a spec from which a DataSource can be
obtained) with a reified DataSource that will ignore method calls
illegal on an XA Connection.</pre><div class="src-link"><a href="https://github.com/immutant/immutant/tree/1.1.0//modules/xa/src/main/clojure/immutant/xa.clj#L26">Source</a></div></div></div></body></html>