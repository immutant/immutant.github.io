<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>immutant.messaging.hornetq documentation</title><link href="assets/immutant.css" rel="stylesheet" type="text/css"></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Immutant 2.1.6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><div id="guides"><h3><a href="index.html"><span class="inner">Guides</span></a></h3><ul><li class="guide Migration-current"><a href="guide-migration.html"><div class="inner"><span>Migration</span></div></a></li><li class="guide Installation-current"><a href="guide-installation.html"><div class="inner"><span>Installation</span></div></a></li><li class="guide Web-current"><a href="guide-web.html"><div class="inner"><span>Web</span></div></a></li><li class="guide Messaging-current"><a href="guide-messaging.html"><div class="inner"><span>Messaging</span></div></a></li><li class="guide Scheduling-current"><a href="guide-scheduling.html"><div class="inner"><span>Scheduling</span></div></a></li><li class="guide Caching-current"><a href="guide-caching.html"><div class="inner"><span>Caching</span></div></a></li><li class="guide Transactions-current"><a href="guide-transactions.html"><div class="inner"><span>Transactions</span></div></a></li><li class="guide WildFly-current"><a href="guide-wildfly.html"><div class="inner"><span>WildFly</span></div></a></li><li class="guide EAP 6.4.x-current"><a href="guide-EAP.html"><div class="inner"><span>EAP 6.4.x</span></div></a></li><li class="guide Logging-current"><a href="guide-logging.html"><div class="inner"><span>Logging</span></div></a></li></ul></div><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant</span></div></div></li><li class="depth-2"><a href="immutant.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-3 branch"><a href="immutant.caching.core-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-cache</span></div></a></li><li class="depth-3"><a href="immutant.caching.core-memoize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-memoize</span></div></a></li><li class="depth-2"><a href="immutant.codecs.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-3"><a href="immutant.codecs.fressian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fressian</span></div></a></li><li class="depth-2 branch"><a href="immutant.coercions.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>coercions</span></div></a></li><li class="depth-2 branch"><a href="immutant.daemons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemons</span></div></a></li><li class="depth-2"><a href="immutant.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch current"><a href="immutant.messaging.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-3"><a href="immutant.messaging.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-2"><a href="immutant.scheduling.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>scheduling</span></div></a></li><li class="depth-3 branch"><a href="immutant.scheduling.joda.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda</span></div></a></li><li class="depth-3"><a href="immutant.scheduling.quartz.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quartz</span></div></a></li><li class="depth-2"><a href="immutant.transactions.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>transactions</span></div></a></li><li class="depth-3 branch"><a href="immutant.transactions.jdbc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jdbc</span></div></a></li><li class="depth-3"><a href="immutant.transactions.scope.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scope</span></div></a></li><li class="depth-2 branch"><a href="immutant.util.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="immutant.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.ssl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ssl</span></div></a></li><li class="depth-3"><a href="immutant.web.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-2"><a href="immutant.wildfly.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>wildfly</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="immutant.messaging.hornetq.html#var-destination-controller"><div class="inner"><span>destination-controller</span></div></a></li><li class="depth-1"><a href="immutant.messaging.hornetq.html#var-server-manager"><div class="inner"><span>server-manager</span></div></a></li><li class="depth-1"><a href="immutant.messaging.hornetq.html#var-set-address-options"><div class="inner"><span>set-address-options</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">immutant.messaging.hornetq</h2><div class="doc"><div class="markdown"><p>Utilities specific to <a href="http://hornetq.jboss.org/">HornetQ</a></p></div></div><div class="public anchor" id="var-destination-controller"><h3>destination-controller</h3><div class="usage"><code>(destination-controller destination)</code><code>(destination-controller destination control-type)</code></div><div class="doc"><div class="markdown"><p>Returns the destination controller for <code>destination</code>.</p><p><code>destination</code> should be the result of calling <code><a href="immutant.messaging.html#var-queue">immutant.messaging/queue</a></code> or <code><a href="immutant.messaging.html#var-topic">immutant.messaging/topic</a></code>.</p><p>The returned controller depends on the type of the given destination and, for queues, the requested control-type (which defaults to <code>:jms</code>):</p>
<table>
  <thead>
    <tr>
      <th>Destination Type </th>
      <th>Control Type </th>
      <th>Controller Type </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>queue </td>
      <td><code>:jms</code> </td>
      <td><a href="http://docs.jboss.org/hornetq/2.4.0.Final/docs/api/hornetq-jms-client/org/hornetq/api/jms/management/JMSQueueControl.html">JMSQueueControl</a> </td>
    </tr>
    <tr>
      <td>queue </td>
      <td><code>:core</code> </td>
      <td><a href="http://docs.jboss.org/hornetq/2.4.0.Final/docs/api/hornetq-client/org/hornetq/api/core/management/QueueControl.html">QueueControl</a> </td>
    </tr>
    <tr>
      <td>topic </td>
      <td>N/A </td>
      <td><a href="http://docs.jboss.org/hornetq/2.4.0.Final/docs/api/hornetq-jms-client/org/hornetq/api/jms/management/TopicControl.html">TopicControl</a> </td>
    </tr>
  </tbody>
</table><p>Refer to the javadocs for those control classes for details on the available operations.</p></div></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.1.6/messaging/src/immutant/messaging/hornetq.clj#L40">view source</a></div></div><div class="public anchor" id="var-server-manager"><h3>server-manager</h3><div class="usage"><code>(server-manager)</code></div><div class="doc"><div class="markdown"><p>Retrieves the local JMS server manager instance.</p></div></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.1.6/messaging/src/immutant/messaging/hornetq.clj#L27">view source</a></div></div><div class="public anchor" id="var-set-address-options"><h3>set-address-options</h3><div class="usage"><code>(set-address-options match settings)</code></div><div class="doc"><div class="markdown"><p>Sets the HornetQ-specific address options for the given match.</p><p>This provides programatic access to options that are normally set in the xml configuration. <code>match</code> must be either a destination returned from <code><a href="immutant.messaging.html#var-queue">immutant.messaging/queue</a></code> or <code><a href="immutant.messaging.html#var-topic">immutant.messaging/topic</a></code>, or a fully qualified jms destination name (prefixed with &lsquo;jms.queue.&rsquo; or &lsquo;jms.topic.&rsquo;). It may contain HornetQ wildcard matchers (see <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/wildcard-syntax.html)">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/wildcard-syntax.html)</a>.</p><p>The following settings are supported [default value]:</p>
<ul>
  <li><p><code>:address-full-message-policy</code> [<code>:page</code>] - Specifies what should  happen when an address reaches <code>:max-size-bytes</code> in undelivered  messages. Options are:</p>
  <ul>
    <li><code>:block</code> - publish calls will block until the current size  drops below <code>:max-size-bytes</code></li>
    <li><code>:drop</code> - new messages are silently dropped</li>
    <li><code>:fail</code> - new messages are dropped and an exception is thrown on publish</li>
    <li><code>:page</code> - new messages will be paged to disk  See <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html</a></li>
  </ul></li>
  <li><p><code>:dead-letter-address</code> [jms.queue.DLQ] - If set, any messages that  fail to deliver to their original destination will be delivered  here. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.configuring">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.configuring</a></p></li>
  <li><p><code>:expiry-address</code> [jms.queue.ExpiryQueue] - If set, any messages  with a <code>:ttl</code> that expires before delivery will be delivered  here. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/message-expiry.html#message-expiry.configuring">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/message-expiry.html#message-expiry.configuring</a></p></li>
  <li><p><code>:expiry-delay</code> [-1] - If &gt; -1, this value (in millis) is used as the  default <code>:ttl</code> for messages that don&rsquo;t have a <code>:ttl</code> &gt; 0 set.</p></li>
  <li><p><code>:last-value-queue</code> [false] - If true, only the most recent message  for a last-value property will be retained. Setting this option will  also cause <code>:address-full-message-policy</code> to be set to <code>:drop</code>, as HornetQ  has a bug related to paging last value queues. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/last-value-queues.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/last-value-queues.html</a></p></li>
  <li><p><code>:max-delivery-attempts</code> [10] - The number of times delivery will  be attempted for a message before giving up. If <code>:dead-letter-address</code>  is set, the message will be delivered there, or removed otherwise. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.configuring">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.configuring</a></p></li>
  <li><p><code>:max-redelivery-delay</code> [<code>:redelivery-delay</code>] - Specifies the maximum  redelivery delay (in millis) when a <code>:redelivery-multiplier</code> is used.</p></li>
  <li><p><code>:max-size-bytes</code> [20971520 (20MB)] - The maximum size (in bytes) of retained messages  on an address before <code>:address-full-message-policy</code> is applied. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html</a></p></li>
  <li><p><code>:page-cache-max-size</code> [5] - HornetQ will keep up to this many page files in  memory to optimize IO. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html</a></p></li>
  <li><p><code>:page-size-bytes</code> [10485760 (10MB)] - The size (in bytes) of the page files created  when paging. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/paging.html</a></p></li>
  <li><p><code>:redelivery-delay</code> [0] - Specifies the delay (in millis) between  redelivery attempts. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.delay">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/undelivered-messages.html#undelivered-messages.delay</a></p></li>
  <li><p><code>:redelivery-multiplier</code> [1.0] - Controls the backoff for redeliveries. The  delay between redelivery attempts is calculated as  <code>:redelivery-delay</code> * (<code>:redelivery-multiplier</code> ^ attempt-count). This won&rsquo;t have  any effect if you don&rsquo;t also set <code>:redelivery-delay</code> and <code>:max-redelivery-delay</code>.</p></li>
  <li><p><code>:redistribution-delay</code> [1000] - Specifies the delay (in millis) to wait before  redistributing messages from a node in a cluster to other nodes when the  queue no longer has consumers on the current node. See  <a href="http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/clusters.html">http://docs.jboss.org/hornetq/2.3.0.Final/docs/user-manual/html/clusters.html</a></p></li>
  <li><p><code>:send-to-dla-on-no-route</code> [false] - If true, any message that can&rsquo;t be  routed to its destination will be sent to <code>:dead-letter-address</code>.</p></li>
</ul><p>Calling this function again with the same match will override replace any previous settings for that match.</p></div></div><div class="src-link"><a href="https://github.com/immutant/immutant/tree/2.1.6/messaging/src/immutant/messaging/hornetq.clj#L104">view source</a></div></div></div></body></html>