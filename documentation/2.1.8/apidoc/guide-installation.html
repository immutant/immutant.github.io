<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Immutant 2.1.8 API documentation</title><link href="assets/immutant.css" rel="stylesheet" type="text/css"></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Immutant 2.1.8 API documentation</a></h1></div><div class="sidebar" id="namespaces"><div id="guides"><h3><a href="index.html"><span class="inner">Guides</span></a></h3><ul><li class="guide Migration-current"><a href="guide-migration.html"><div class="inner"><span>Migration</span></div></a></li><li class="guide current"><a href="guide-installation.html"><div class="inner"><span>Installation</span></div></a></li><li class="guide Web-current"><a href="guide-web.html"><div class="inner"><span>Web</span></div></a></li><li class="guide Messaging-current"><a href="guide-messaging.html"><div class="inner"><span>Messaging</span></div></a></li><li class="guide Scheduling-current"><a href="guide-scheduling.html"><div class="inner"><span>Scheduling</span></div></a></li><li class="guide Caching-current"><a href="guide-caching.html"><div class="inner"><span>Caching</span></div></a></li><li class="guide Transactions-current"><a href="guide-transactions.html"><div class="inner"><span>Transactions</span></div></a></li><li class="guide WildFly-current"><a href="guide-wildfly.html"><div class="inner"><span>WildFly</span></div></a></li><li class="guide EAP 6.4.x-current"><a href="guide-EAP.html"><div class="inner"><span>EAP 6.4.x</span></div></a></li><li class="guide Logging-current"><a href="guide-logging.html"><div class="inner"><span>Logging</span></div></a></li></ul></div><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant</span></div></div></li><li class="depth-2"><a href="immutant.caching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>caching</span></div></a></li><li class="depth-3 branch"><a href="immutant.caching.core-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-cache</span></div></a></li><li class="depth-3"><a href="immutant.caching.core-memoize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-memoize</span></div></a></li><li class="depth-2"><a href="immutant.codecs.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-3"><a href="immutant.codecs.fressian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fressian</span></div></a></li><li class="depth-2 branch"><a href="immutant.coercions.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>coercions</span></div></a></li><li class="depth-2 branch"><a href="immutant.daemons.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemons</span></div></a></li><li class="depth-2"><a href="immutant.messaging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>messaging</span></div></a></li><li class="depth-3 branch"><a href="immutant.messaging.hornetq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hornetq</span></div></a></li><li class="depth-3"><a href="immutant.messaging.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-2"><a href="immutant.scheduling.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>scheduling</span></div></a></li><li class="depth-3 branch"><a href="immutant.scheduling.joda.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>joda</span></div></a></li><li class="depth-3"><a href="immutant.scheduling.quartz.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>quartz</span></div></a></li><li class="depth-2"><a href="immutant.transactions.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>transactions</span></div></a></li><li class="depth-3 branch"><a href="immutant.transactions.jdbc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jdbc</span></div></a></li><li class="depth-3"><a href="immutant.transactions.scope.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scope</span></div></a></li><li class="depth-2 branch"><a href="immutant.util.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="immutant.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="immutant.web.ssl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ssl</span></div></a></li><li class="depth-3"><a href="immutant.web.undertow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>undertow</span></div></a></li><li class="depth-2"><a href="immutant.wildfly.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>wildfly</span></div></a></li></ul></div><div class='namespace-index guide' id='content'><div class='markdown doc'><div class="guide-content"><h1>Installation Guide</h1><div class="description"><span>Using the Immutant libraries in your application</span></div><div id="toc"><ul><li><a href="#h3334"><span>project.clj</span></a><ul><li><a href="#h3335"><span>:dependencies</span></a></li><li><a href="#h3336"><span>:main</span></a></li></ul></li><li><a href="#h3337"><span>Incremental Builds</span></a></li><li><a href="#h3338"><span>Additional Resources</span></a></li></ul></div><p>Installation of Immutant 1.x was atypical of most Clojure libraries, because that distribution included a fork of the JBoss AS7 application server. In Immutant 2.x, the application server is gone, so there is no explicit installation step.</p><h2 id="h3334">project.clj</h2><p>To use Immutant, you need two things in your <code>project.clj</code>:</p>
<ul>
  <li>Immutant lib[s] in your <code>:dependencies</code></li>
  <li>a <code>:main</code> function or namespace</li>
</ul><h3 id="h3335">:dependencies</h3><p>Here&rsquo;s an example making all the Immutant libraries available in a project&rsquo;s classpath:</p>
<pre><code class="clojure">(defproject some-project &quot;1.2.3&quot;
  ...
  :dependencies [[org.immutant/web &quot;2.1.8&quot;]
                 [org.immutant/caching &quot;2.1.8&quot;]
                 [org.immutant/messaging &quot;2.1.8&quot;]
                 [org.immutant/scheduling &quot;2.1.8&quot;]
                 [org.immutant/transactions &quot;2.1.8&quot;]])
</code></pre><p>You would of course only include the libs you need, but if you really did use all of them, or you just want to experiment, we provide an aggregate that brings them all in transitively:</p>
<pre><code class="clojure">(defproject some-project &quot;1.2.3&quot;
  ...
  :dependencies [[org.immutant/immutant &quot;2.1.8&quot;]]
</code></pre><p><strong>NOTE:</strong> There is another library providing utility functions relevant only within <a href="http://wildfly.org/">WildFly</a> that is not brought in by the aggregate. If your app relies on the <a href="immutant.wildfly.html">immutant.wildfly</a> namespace and you wish to compile it outside the container, you&rsquo;ll need to explicitly depend on <code>org.immutant/wildfly</code> in your <code>project.clj</code>:</p>
<pre><code class="clojure">(defproject some-project &quot;1.2.3&quot;
  ...
  :dependencies [[org.immutant/immutant &quot;2.1.8&quot;]
                 [org.immutant/wildfly &quot;2.1.8&quot;]]
</code></pre><p>See the <a href="guide-wildfly.html">WildFly guide</a> for details.</p><h3 id="h3336">:main</h3><p>With the dependencies in place, you simply invoke the Immutant services from your app&rsquo;s main entry point, identified by the <code>:main</code> key in your <code>project.clj</code>.</p><p>If you created your project with the <code>app</code> template, like so:</p>
<pre><code>lein new app my-app
</code></pre><p>Then the value of the <code>:main</code> entry in <code>project.clj</code> will be <code>my-app.core</code> and the <code>-main</code> function in <code>src/my_app/core.clj</code> is where you should invoke the Immutant services. For example:</p>
<pre><code class="clojure">(ns my-app.core
  (:require [immutant.web :as web])
  (:gen-class))

(defn app [request]
  {:status 200
   :body &quot;Hello world!&quot;})

(defn -main []
  (web/run app))
</code></pre><p>You can also specify a fully-qualified symbol for <code>:main</code> that points to function to use instead of <code>-main</code>:</p>
<pre><code class="clojure">:main my-app.core/start
</code></pre><p>But what if your project doesn&rsquo;t have a <code>:main</code> function? Perhaps you created your app with a popular Ring-based template like <a href="https://github.com/weavejester/compojure">Compojure</a>:</p>
<pre><code>lein new compojure my-app
</code></pre><p>Instead of a <code>:main</code>, you&rsquo;ll have a <code>:ring</code> map with a <code>:handler</code> called <code>my-app.handler/app</code>. So you&rsquo;ll need to manually add a <code>:main</code> entry referencing a function in your project. You can easily add one to <code>src/my_app/handler.clj</code>:</p>
<pre><code class="clojure">(ns my-app.handler
  ...
  (:require [immutant.web :as web])
  ... )

(def app ... )

(defn start []
  (web/run app))
</code></pre><p>With <code>:main</code> set to <code>my-app.handler/start</code> in <code>project.clj</code>, you can then start your app like so:</p>
<pre><code>lein run
</code></pre><p>If you are deploying your application to <a href="http://wildfly.org/">WildFly</a>, see the <a href="guide-wildfly.html">WildFly guide</a> for information on how <code>:main</code> is handled there.</p><h2 id="h3337">Incremental Builds</h2><p>If you need cutting-edge features/fixes that aren&rsquo;t in the latest release, you can use an incremental build.</p><p>Our CI server publishes an <a href="http://immutant.org/builds/2x/">incremental release</a> for each successful build. In order to use an incremental build, you&rsquo;ll need to add a repository to your <code>project.clj</code>:</p>
<pre><code class="clojure">(defproject some-project &quot;1.2.3&quot;
  ...
  :dependencies [[org.immutant/immutant &quot;2.x.incremental.BUILD_NUMBER&quot;]]
  :repositories [[&quot;Immutant 2.x incremental builds&quot;
                  &quot;http://downloads.immutant.org/incremental/&quot;]])
</code></pre><p>You should replace <strong>BUILD_NUMBER</strong> with the actual build number for the version you want to use. You can obtain this from our <a href="http://immutant.org/builds/2x/">builds</a> page.</p><h2 id="h3338">Additional Resources</h2><p>The API docs for the latest Immutant release are always available here:</p>
<ul>
  <li><a href="/documentation/current/apidoc/">http://immutant.org/documentation/current/apidoc/</a></li>
</ul><p>as well as the API docs for the <a href="https://projectodd.ci.cloudbees.com/job/immutant2-incremental/lastSuccessfulBuild/artifact/target/apidocs/index.html">latest CI build</a>.</p><p>If you are interested in using Immutant inside a <a href="http://wildfly.org/">WildFly</a> container, see our <a href="guide-wildfly.html">WildFly guide</a>.</p></div></div></div><script src="assets/jquery.syntax.min.js" type="text/javascript"></script><script src="assets/immutant.js" type="text/javascript"></script></body></html>