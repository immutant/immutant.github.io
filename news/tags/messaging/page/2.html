<!DOCTYPE html>
<html>
  <head>
    <title>
      Immutant | News
    </title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link href="/news.atom" rel="alternate" type="application/atom+xml">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/dateformat.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">
            <img id="logo" src="/images/logos/logo-horizontal-centered.png">
          </a>
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/news/">News</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/community/">Community</a>
              </li>
              <li>
                <a href="/development/">Development</a>
              </li>
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  Quick Links
                  <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a href="/documentation/current/apidoc/">2.x API Docs & Guides</a>
                  </li>
                  <li>
                    <a href="/builds/2x/">2.x Incremental Builds</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="/documentation/1.1.4/" rel="nofollow">1.x Manual</a>
                  </li>
                  <li>
                    <a href="/documentation/1.1.4/apidoc/" rel="nofollow">1.x API Docs</a>
                  </li>
                  <li>
                    <a href="/tutorials-1x/" rel="nofollow">1.x Tutorials</a>
                  </li>
                  <li>
                    <a href="/builds/" rel="nofollow">1.x Incremental Builds</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="/releases/">All Versioned Releases</a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/browse/IMMUTANT">Issues</a>
                  </li>
                  <li>
                    <a href="http://webchat.freenode.net/?channels=immutant">#immutant on IRC</a>
                  </li>
                  <li>
                    <a href="https://github.com/immutant/immutant">Source</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div id="wrapper">
      <div class="container" id="main-content">
        <div class="page-header">
          <h1>
            News
          </h1>
        </div>
        <div class="row">
          <div class="span8" id="main-column">
            <div class="post">
              <h2 class="title">
                <a href="/news/2013/09/23/websocket-sockjs-part-deux/">WebSockets and SockJS with Immutant and Vert.x - Part 2</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Toby Crawley
                </div>
                <div class="date">
                  Monday, September 23, 2013
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/daemons/">daemons</a>
                <a href="/news/tags/vertx/">vertx</a>
                <a href="/news/tags/websockets/">websockets</a>
                <a href="/news/tags/sockjs/">sockjs</a>
                <a href="/news/tags/messaging/">messaging</a>
              </div>
              <div class="body">
                <p>This is a followup to our
                <a href="/news/2013/09/17/websocket-sockjs/">post last week on WebSockets with Vert.x</a>. If you haven&#39;t read
                it, you should do so now. In that post, we set up a simple echo
                service in <a href="http://vertx.io/">Vert.x</a> that bridged the Vert.x <a href="https://github.com/vert-x/mod-lang-clojure/blob/master/docs/core_manual_clojure.md#the-event-bus">EventBus</a> to the
                browser. But that echo service wasn&#39;t very useful - there was no way
                to process incoming messages outside of the daemon, and no way to send
                messages down to the browser client from other parts of the
                application. Today, we&#39;re going to look at bridging the EventBus over
                to <a href="/documentation/current/messaging.html">Immutant messaging</a>, allowing us to actually interact with the
                client from anywhere within our application.</p>
                
                <h2 id="Our_application" onclick="window.location = '#Our_application'">Our application</h2>
                
                <p>We&#39;ll be using the <a href="https://github.com/immutant/simple-immutant-vertx-demo">same application</a> we used in the last post, but
                will be working off of a <a href="https://github.com/immutant/simple-immutant-vertx-demo/tree/with-messaging">branch</a>.</p>
                
                <p>To get started, <a href="https://github.com/immutant/simple-immutant-vertx-demo">clone the app</a> and run it:<sup id="bfn1"><a href="#fn1">1</a></sup></p>
                
                <pre><code>cd /path/to/simple-immutant-vertx-demo&#x000A;git checkout with-messaging&#x000A;lein do immutant deploy, immutant run&#x000A;</code></pre>
                
                <p>Then browse to <a href="http://localhost:8080/">http://localhost:8080/</a>. You should see a UI that lets
                you send messages and see those messages echoed back, but now they
                come back in uppercase:</p>
                
                <p><img src="/images/news/sockjs2.png" alt="[UI activity]" class="bordered aligncenter"/></p>
                
                <h2 id="Let&#39;s_see_some_code!" onclick="window.location = '#Let&#39;s_see_some_code!'">Let&#39;s see some code!</h2>
                
                <p>Most of the application remains the same as it did before. But instead
                of just copying messages from the request address to the response
                address, we&#39;ve now wired our
                <a href="https://github.com/immutant/simple-immutant-vertx-demo/blob/with-messaging/src/demo/bridge.clj"><code>demo.bridge</code> namespace</a>
                to the Immutant messaging system. We now have functions that bridge
                EventBus addresses to Immutant messaging destinations, and vice-versa,
                and have modified the <code>init-bridge</code> function to map the appropriate
                addresses and destinations:</p>
                
                <pre class="syntax clojure">(ns demo.bridge&#x000A;  (:require [vertx.embed :as vembed :refer [with-vertx]]&#x000A;            [vertx.http :as http]&#x000A;            [vertx.http.sockjs :as sockjs]&#x000A;            [vertx.eventbus :as eb]&#x000A;            [immutant.messaging :as msg]))&#x000A;&#x000A;(defn dest->eventbus&#x000A;  "Sets up a bridge to copy messages from an Immutant messaging dest to a Vertx address."&#x000A;  [vertx dest address]&#x000A;  (msg/listen dest #(with-vertx vertx&#x000A;                      (eb/publish address %))))&#x000A;&#x000A;(defn eventbus->dest&#x000A;  "Sets up a bridge to copy messages from a Vertx address to an Immutant messaging dest."&#x000A;  [vertx address dest]&#x000A;  (with-vertx vertx&#x000A;    (eb/on-message address (partial msg/publish dest))))&#x000A;&#x000A;(defn- start-sockjs-bridge&#x000A;  "Creates a Vert.x http server, a sockjs server within that http&#x000A;  server, then installs an eventbus bridge in the sockjs server."&#x000A;  [vertx host port path]&#x000A;  (println (format "Starting SockJS bridge at http://%s:%s%s" host port path))&#x000A;  (with-vertx vertx&#x000A;    (let [server (http/server)]&#x000A;      (-> server&#x000A;          (sockjs/sockjs-server)&#x000A;          (sockjs/bridge {:prefix path} [{}] [{}]))&#x000A;      (http/listen server port host))))&#x000A;&#x000A;(defn init-bridge&#x000A;  "Initializes the embedded vertx instance, bridges to Immutant destinations, and starts the sockjs bridge."&#x000A;  [{:keys [request-dest response-dest]}]&#x000A;  (let [vertx (vembed/vertx)]&#x000A;    (eventbus->dest vertx "demo.request" request-dest)&#x000A;    (dest->eventbus vertx response-dest "demo.response")&#x000A;    {:vertx vertx&#x000A;     :server (start-sockjs-bridge vertx "localhost" 8081 "/eventbus")}))</pre>
                
                <p>Now that <code>demo.bridge</code> no longer echos, but instead expects something
                on the other end of the <code>request-dest</code>, we need something listening on
                the other end to do the work. We&#39;ve added this to the
                <a href="https://github.com/immutant/simple-immutant-vertx-demo/blob/with-messaging/src/demo/init.clj"><code>demo.init</code> namespace</a>,
                which is also where we define the request/response destination
                names. Our listener here just watches <code>queue.request</code>, uppercases each
                message, and publishes it to <code>topic.response</code>. Since we have bridged
                those same destinations in <code>demo.bridge</code>, we again have a completed
                circle from the client and back:</p>
                
                <pre class="syntax clojure">(ns demo.init&#x000A;  (:require [demo.web :as web]&#x000A;            [demo.daemon :as daemon]&#x000A;            [immutant.messaging :as msg]))&#x000A;&#x000A;(def config {:response-dest "topic.response"&#x000A;             :request-dest "queue.request"&#x000A;             :process-fn (memfn toUpperCase)})&#x000A;&#x000A;(defn init []&#x000A;  (let [{:keys [request-dest response-dest process-fn]} config]&#x000A;    (msg/start request-dest)&#x000A;    (msg/start response-dest)&#x000A;    (msg/listen request-dest&#x000A;                #(msg/publish response-dest (process-fn %))))&#x000A;  (web/start)&#x000A;  (daemon/start config))</pre>
                
                <h2 id="Touch_the_UI_from_anywhere" onclick="window.location = '#Touch_the_UI_from_anywhere'">Touch the UI from anywhere</h2>
                
                <p>Now that we&#39;ve bridged the EventBus to the Immutant messaging system,
                we can interact with our client UI from anywhere within our
                application. Just to beat the horse a bit more, let&#39;s do it from the
                repl. Connect to the <a href="/documentation/current/development.html#interactive">nREPL endpoint</a> in the application running on
                port <code>5309</code><sup id="bfn2"><a href="#fn2">2</a></sup> using your favorite client, then try sending messages
                directly to the response topic, or to the request queue to have them
                uppercased first:</p>
                
                <pre class="syntax clojure">user&gt; (require '[immutant.messaging :as msg])&#x000A;nil&#x000A;user&gt; (msg/publish "topic.response" "ahoyhoy")&#x000A;#&lt;HornetQTextMessage HornetQMessage[ID:8af51642-2478-11e3-9deb-25745b71356d]:PERSISTENT&gt;&#x000A;user&gt; (msg/publish "queue.request" "ahoyhoy")&#x000A;#&lt;HornetQTextMessage HornetQMessage[ID:90e4b5b8-2478-11e3-9deb-25745b71356d]:PERSISTENT&gt;&#x000A;user&gt; </pre>
                
                <p>You can also send structured messages:</p>
                
                <pre class="syntax clojure">user&gt; (msg/publish "topic.response" {:x :y})&#x000A;#&lt;HornetQTextMessage HornetQMessage[ID:e09bf794-2478-11e3-9deb-25745b71356d]:PERSISTENT&gt;</pre>
                
                <p>And see them all displayed in the client UI:</p>
                
                <p><img src="/images/news/sockjs3.png" alt="[repl UI activity]" class="bordered aligncenter"/></p>
                
                <h2 id="Fare_thee_well" onclick="window.location = '#Fare_thee_well'">Fare thee well</h2>
                
                <p>We&#39;ve extended our <a href="/news/2013/09/17/websocket-sockjs/">prior example</a> to make it actually useful, and
                maintained a separation of concerns within our application - code
                outside of the <code>demo.bridge</code> namespace has no knowledge of Vert.x, nor
                of the UI communication mechanism. We think this provides a compelling
                way to provide dynamic updates to the browser, but if you don&#39;t, or
                have any other questions, comments, or feedback, please
                <a href="/community/">get in touch</a>.</p>
                
                <hr>
                
                <ol>
                <li id="fn1" class="footnote"> <a href="#bfn1">^</a> This assumes you have a recent Immutant
                <a href="/install/">installed</a>.</li>
                <li id="fn2" class="footnote"> <a href="#bfn2">^</a> The demo application specifies <code>5309</code> as the <code>:nrepl-port</code> in
                its <code>project.clj</code>. If you have <code>:immutant {:nrepl-port some-port}</code>
                set in your <code>~/.lein/profiles.clj</code>, that will override <code>5309</code> and
                you&#39;ll need to connect to whatever port the endpoint is bound to.</li>
                </ol>
              </div>
              <div class="tail">
                 <a href="http://immutant.org/news/2013/09/23/websocket-sockjs-part-deux/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2013/08/20/openshift-clustering/">Clustering Immutants on OpenShift</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Jim Crossley
                </div>
                <div class="date">
                  Tuesday, August 20, 2013
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/openshift/">openshift</a>
                <a href="/news/tags/tutorial/">tutorial</a>
                <a href="/news/tags/clustering/">clustering</a>
                <a href="/news/tags/messaging/">messaging</a>
                <a href="/news/tags/caching/">caching</a>
                <a href="/news/tags/daemons/">daemons</a>
                <a href="/news/tags/scheduled-jobs/">scheduled-jobs</a>
                <a href="/news/tags/ring/">ring</a>
              </div>
              <div class="body">
                <p>Lately I&#39;ve been spending a lot of time on <a href="http://openshift.com/">OpenShift</a>, building and
                testing a <a href="https://www.openshift.com/developers/technologies">cartridge</a> for Immutant that will properly form a cluster
                across multiple OpenShift <a href="https://www.openshift.com/products/pricing">gears</a>. In this post, I&#39;ll go through the steps
                of deploying a simple application that demonstrates all of the
                Immutant clustering features running on the three small gears you get
                for free on OpenShift.</p>
                
                <p>Here are the features we&#39;ll be demonstrating:</p>
                
                <ul>
                <li>Load-balanced message distribution with automatic peer discovery</li>
                <li>Replicated caching</li>
                <li>Highly-Available, long-running daemons</li>
                <li>HA scheduled jobs</li>
                <li>Web load balancing and session replication</li>
                </ul>
                
                <p>If you haven&#39;t already, go <a href="https://www.openshift.com/get-started#cli">set up an OpenShift account</a> and update
                your <code>rhc</code> gem to the latest version. I used 1.12.4 for this article.
                Below you&#39;ll see references to <em>$namespace</em> -- this corresponds to
                your OpenShift domain name, set by running <code>rhc setup</code>.</p>
                
                <p><em>Note</em>: If this is the first time you&#39;ve used OpenShift, you&#39;ll need
                to visit the <a href="https://openshift.redhat.com/app/console">console</a> and accept the usage agreement before running
                the <code>rhc</code> command.</p>
                
                <h2 id="Create_a_scaled_OpenShift_app" onclick="window.location = '#Create_a_scaled_OpenShift_app'">Create a scaled OpenShift app</h2>
                
                <p>The Immutant cartridge is available here:
                <a href="https://github.com/immutant/openshift-immutant-cart">https://github.com/immutant/openshift-immutant-cart</a>. As described in
                its README, we create our app using the following command:</p>
                
                <pre><code>rhc app-create -s demo https://raw.github.com/immutant/openshift-immutant-cart/master/metadata/manifest.yml&#x000A;</code></pre>
                
                <p>We&#39;re calling our app <em>demo</em> and we&#39;re passing the <code>-s</code> option to
                make our app scalable. Notice that we&#39;re passing a raw URL to the
                cartridge&#39;s <code>manifest.yml</code>.</p>
                
                <p>Small gears are pretty slow, but when <code>app-create</code> finally completes,
                you&#39;ll have a bare-bones, standard Leiningen application beneath the
                <code>demo/</code> directory. At this point, you might tail your app&#39;s logs or
                ssh into your gear:</p>
                
                <pre><code>rhc tail demo&#x000A;rhc ssh demo&#x000A;</code></pre>
                
                <p>The critical log file for Immutant on OpenShift is
                <code>immutant/logs/server.log</code>. Monitor this file until you eventually see
                the line, <em>Deployed &quot;your-clojure-application.clj&quot;</em>. Then point a
                browser at <a href="http://demo-$namespace.rhcloud.com">http://demo-$namespace.rhcloud.com</a> to see a simple
                welcome page.</p>
                
                <p>Now we&#39;ll put some meat on our bare-bones app!</p>
                
                <h2 id="Push_Me,_Pull_You" onclick="window.location = '#Push_Me,_Pull_You'">Push Me, Pull You</h2>
                
                <p>Typically, you will add the remote git repository for your real
                application to the local OpenShift repository you just created. We&#39;re
                going to use <a href="https://github.com/immutant/cluster-demo">https://github.com/immutant/cluster-demo</a> as our &quot;real&quot;
                application.</p>
                
                <pre><code>git remote add upstream -m master git@github.com:immutant/cluster-demo.git&#x000A;</code></pre>
                
                <p>Deployment of your app to OpenShift amounts to pulling from your real
                repository and pushing to OpenShift&#39;s.</p>
                
                <pre><code>git pull -s recursive -X theirs upstream master&#x000A;git push&#x000A;</code></pre>
                
                <p>While waiting for that to complete, run <code>rhc tail demo</code> in another
                shell to monitor your log. This time, the <em>Deployed
                &quot;your-clojure-application.clj&quot;</em> message is going to scroll off the
                screen as the cluster-demo app starts logging its output. Eventually,
                the app should settle into a steady state looking something like this:</p>
                
                <p><img src="/images/news/demo-log.png"/></p>
                
                <h2 id="The_cluster-demo_app" onclick="window.location = '#The_cluster-demo_app'">The cluster-demo app</h2>
                
                <p>If you can ignore the inconsistent thread identifiers in the above
                output, you&#39;ll notice there are exactly four types of messages:
                <strong>send</strong>, <strong>recv</strong>, <strong>web</strong>, and <strong>job</strong>. Noting the timestamps in the
                left column, a <strong>send</strong> is logged every 5 seconds, as is its
                corresponding <strong>recv</strong>, a <strong>web</strong> logged every 2 seconds, and a
                <strong>job</strong> every 20 seconds.</p>
                
                <p>The cluster-demo app is comprised of the following:</p>
                
                <ul>
                <li>A message queue named <em>/queue/msg</em></li>
                <li>A distributed cache named <em>counters</em></li>
                <li>A listener for the queue that prints the received message and the
                current contents of the cache</li>
                <li>An HA daemon named <em>counter</em> that queues a cached value and
                increments it every 5 seconds</li>
                <li>An HA scheduled job named <em>ajob</em> that increments another counter in
                the cache every 20 seconds</li>
                <li>A web request handler mounted at <strong>/</strong> that logs its <code>:path-info</code>
                and returns the current values of the two cached counters</li>
                <li>Another request handler mounted at <strong>/count</strong> that increments a
                counter in the user&#39;s web session.</li>
                </ul>
                
                <p>All the code (~60 lines) is <a href="https://github.com/immutant/cluster-demo/blob/master/src/immutant/init.clj">contained in a single file</a>.</p>
                
                <h2 id="Programming_is_hard,_let&#39;s_build_a_cluster!" onclick="window.location = '#Programming_is_hard,_let&#39;s_build_a_cluster!'">Programming is hard, let&#39;s build a cluster!</h2>
                
                <p>Now we&#39;re ready to form a cluster by adding a gear to our app:</p>
                
                <pre><code>rhc scale-cartridge immutant -a demo 2&#x000A;</code></pre>
                
                <p>Again, this will take a few minutes, and it may return an error even
                though the operation actually succeeded. You can run the following to
                see the definitive state of your gears:</p>
                
                <pre><code>rhc show-app --gears&#x000A;</code></pre>
                
                <p>This also gives you the SSH URLs for your two gears. Fire up two
                shells and ssh into each of your gears using those SSH URLs. Then
                tail the log on each:</p>
                
                <pre><code>tail -f immutant/logs/server.log&#x000A;</code></pre>
                
                <p>When the dust settles, you&#39;ll eventually see the gears discover each
                other, and you should see both gears logging <strong>recv</strong> messages, one
                getting the even numbers and one getting the odd. This is your
                automatic load-balanced message distribution. </p>
                
                <p>Note also that the counters cache logged in the <strong>recv</strong> message is
                correct on both gears, even though it&#39;s only being updated by one.
                This is our cache replication at work.</p>
                
                <h2 id="Let&#39;s_break_stuff!" onclick="window.location = '#Let&#39;s_break_stuff!'">Let&#39;s break stuff!</h2>
                
                <p>And see how robust our cluster is.</p>
                
                <h3 id="High_Availability_Daemons_and_Jobs" onclick="window.location = '#High_Availability_Daemons_and_Jobs'">High Availability Daemons and Jobs</h3>
                
                <p>Of course, the <strong>send</strong> and <strong>job</strong> log entries should still only
                appear on our original gear, because those are our HA singletons. If
                that gear crashes, our daemon and job should migrate to the other
                gear. While logged into the gear running your singletons, run this:</p>
                
                <pre><code>immutant/bin/control stop&#x000A;</code></pre>
                
                <p>And watch the other gear&#39;s log to verify the daemon and job pick up
                right where they left off, fetching their counters from the replicated
                cache. That gear should be consuming all the queued messages, too. Now
                start the original gear back up:</p>
                
                <pre><code>immutant/bin/control start&#x000A;</code></pre>
                
                <p>Eventually, it&#39;ll start receiving half the messages again.</p>
                
                <h3 id="Web" onclick="window.location = '#Web'">Web</h3>
                
                <p>You may be wondering about those <strong>web</strong> entries showing up in both
                logs. They are &quot;health check&quot; requests from the <a href="https://www.openshift.com/blogs/how-haproxy-scales-openshift-apps">HAProxy</a> web load
                balancer, automatically installed on your primary gear. You can always
                check the state of your cluster from HAProxy&#39;s perspective by visiting
                <a href="http://demo-$namespace.rhcloud.com/haproxy-status">http://demo-$namespace.rhcloud.com/haproxy-status</a>. If you see that
                page without intending to, it means something about your app is
                broken, so check <code>immutant/logs/server.log</code> for errors and make sure
                your app responds to a request for the root context, i.e. &quot;/&quot;.</p>
                
                <p>Let&#39;s try some web stuff. Use curl to hit your app while observing the
                logs on both gears:</p>
                
                <pre><code>curl http://demo-$namespace.rhcloud.com/xxxxxxxxxxxxxxxxxxxx&#x000A;curl http://demo-$namespace.rhcloud.com/yyyyyyyyyyyyyyyyyyyy&#x000A;curl http://demo-$namespace.rhcloud.com/zzzzzzzzzzzzzzzzzzzz&#x000A;</code></pre>
                
                <p>Use an obnoxious path to distinguish your request from the health
                checks. Repeat the command a few times to observe the gears taking
                turns responding to your request. Now try it in a browser, and you&#39;ll
                see the same gear handling your request every time you reload. This is
                because HAProxy is setting cookies in the response to enable session
                affinity, which your browser is probably sending back. And <code>curl</code>
                didn&#39;t.</p>
                
                <p>Speaking of session affinity, let&#39;s break that while we&#39;re at it, by
                invoking our other web handler, the one that increments a counter in
                the user&#39;s web session: <a href="http://demo-$namespace.rhcloud.com/count">http://demo-$namespace.rhcloud.com/count</a></p>
                
                <p>You should see the counter increment each time you reload your
                browser. (You&#39;ll need to give <code>curl</code> a cookie store to see it respond
                with anything other than &quot;1 times&quot;)</p>
                
                <p>Pay attention to which gear is responding to the <em>/count</em> request. Now
                stop that gear like you did before. When you reload your browser, you
                should see the other gear return the expected value. This is the
                automatic session replication provided by
                <code>immutant.web.session/servlet-store</code>.</p>
                
                <p>Don&#39;t forget to restart that gear.</p>
                
                <h2 id="The_Hat_Trick" onclick="window.location = '#The_Hat_Trick'">The Hat Trick</h2>
                
                <p>Hey, OpenShift is giving us 3 free gears, we may as well use &#39;em all,
                right?</p>
                
                <pre><code>rhc scale-cartridge immutant -a demo 3&#x000A;</code></pre>
                
                <p>When the third one finally comes up, there are a couple of things you
                may notice:</p>
                
                <ul>
                <li>The health checks will disappear from the primary gear as HAProxy
                takes it out of the rotation when 2 or more other gears are
                available, ostensibly to mitigate the <a href="http://en.wikipedia.org/wiki/Observer_effect_(information_technology)">observer effect</a> of the
                health checks.</li>
                <li>Each cache key will only show up in the <strong>recv</strong> log messages on 2
                of the 3 gears. This is because Immutant caches default to
                Infinispan&#39;s <code>:distributed</code> replication mode in a cluster. This
                enables Infinispan clusters to achieve &quot;linear scalability&quot; as
                entries are copied to a fixed number of cluster nodes (default 2)
                regardless of the cluster size. Distribution uses a consistent
                hashing algorithm to determine which nodes will store a given entry.</li>
                </ul>
                
                <h2 id="Now_what?" onclick="window.location = '#Now_what?'">Now what?</h2>
                
                <p>Well, that was a lot to cover. I doubt many apps will use all these
                features, but I think it&#39;s nice to have a free playground on which to
                try them out, even with the resources as constrained as they are on a
                small gear.</p>
                
                <p>Regardless, I&#39;m pretty happy that Immutant is finally feature-complete
                on OpenShift now. :-)</p>
                
                <p>Of course, I had a lot of help getting things to this point. Many
                folks on the OpenShift and JBoss teams were generous with their
                expertise, but the &quot;three B&#39;s&quot; deserve special mention:
                <a href="https://twitter.com/bbrowning">Ben</a>,
                <a href="http://belaban.blogspot.com/">Bela</a>, and
                <a href="http://www.billdecoste.net/">Bill</a>.</p>
                
                <p>Thanks!</p>
              </div>
              <div class="tail">
                 <a href="http://immutant.org/news/2013/08/20/openshift-clustering/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2013/03/07/overlay-screencast/">Overlay Screencast</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Jim Crossley
                </div>
                <div class="date">
                  Thursday, March  7, 2013
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/screencast/">screencast</a>
                <a href="/news/tags/torquebox/">torquebox</a>
                <a href="/news/tags/overlay/">overlay</a>
                <a href="/news/tags/messaging/">messaging</a>
                <a href="/news/tags/caching/">caching</a>
              </div>
              <div class="body">
                <p>I put together a quick <a href="http://www.youtube.com/watch?v=KqdY0wz_Rb0">screencast</a> showing how to <a href="/tutorials/overlay/index.html">overlay</a> the latest
                incremental releases of both Immutant and <a href="http://torquebox.org/">TorqueBox</a> into a single app
                server capable of deploying both Clojure and Ruby apps.</p>
                
                <p>Further, I show how those Clojure and Ruby apps can seamlessly
                exchange messages and share caches using the respective messaging and
                caching libraries from both Immutant and TorqueBox.</p>
                
                <p>Enjoy!</p>
                
                <iframe width="480" height="360" src="http://www.youtube.com/embed/KqdY0wz_Rb0" frameborder="0" allowfullscreen></iframe>
              </div>
              <div class="tail">
                 <a href="http://immutant.org/news/2013/03/07/overlay-screencast/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2013/01/14/pipelines/">Introducing Immutant Pipelines</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Toby Crawley
                </div>
                <div class="date">
                  Monday, January 14, 2013
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/pipelines/">pipelines</a>
                <a href="/news/tags/messaging/">messaging</a>
                <a href="/news/tags/clustering/">clustering</a>
              </div>
              <div class="body">
                <p><img src="/images/news/pipeline.jpg" alt="[pipeline]" class="alignright"/></p>
                
                <p>Happy new year! We&#39;d like to celebrate by announcing a new Immutant
                feature: <em>pipelines</em>. Pipelines are compositions of functions, where
                the functions are executed in individual threads (or thread pools),
                potentially on different nodes in an Immutant cluster. They are built
                on top of our
                <a href="/builds/LATEST/html-docs/messaging.html">messaging subsystem</a>,
                and were inspired by
                <a href="https://github.com/ztellman/lamina/wiki/Pipelines-new">lamina&#39;s pipelines</a>.</p>
                
                <h2 id="Usage" onclick="window.location = '#Usage'">Usage</h2>
                
                <p>We&#39;ll walk through a simple (and simplistic) example to demonstrate
                using a pipeline.</p>
                
                <h3 id="Creation" onclick="window.location = '#Creation'">Creation</h3>
                
                <p>The first thing we have to do is create a pipeline. We do that with a
                call to the
                <a href="/builds/LATEST/html-docs/apidoc/immutant.pipeline.html#var-pipeline">pipeline</a>
                function, giving it a name and some single-arity functions that form
                the <em>steps</em> of the pipeline:</p>
                
                <pre class="syntax clojure">(require '[immutant.pipeline :as pl])&#x000A;&#x000A;(defonce reverse-pl&#x000A;  (pl/pipeline :reverse-a-string&#x000A;    seq&#x000A;    reverse&#x000A;    (partial apply str)))</pre>
                
                <p>This looks similar to a &#39;thread last&#39; (<code>-&gt;&gt;</code>), or a <code>comp</code> in
                reverse. But for the functions we&#39;re using in this sample pipeline,
                let&#39;s pretend that each of them are more computation and time
                intensive than they actually are, and could benefit from being scaled
                across threads or across a cluster.</p>
                
                <h3 id="Putting_data_onto_a_pipeline" onclick="window.location = '#Putting_data_onto_a_pipeline'">Putting data onto a pipeline</h3>
                
                <p>So, moving right along. We now have a pipeline, but how do we put data
                on it? The call to <code>pipeline</code> returns a function (we&#39;ll call it a
                <em>pipeline-fn</em>) that places data onto the head of the pipeline. Let&#39;s
                use it:</p>
                
                <pre class="syntax clojure">(let [result (reverse-pl "ham")]&#x000A;  (deref result 1000 nil)) ;; => "mah"</pre>
                
                <p>What&#39;s with the <code>deref</code>? The pipeline execution is asynchronous - the
                pipeline-fn places the data onto the head of the pipeline, and
                immediately returns a delay. We dereference the delay to synchronize
                on the end of the pipeline, giving us the result. We&#39;re careful to use
                the <code>deref</code> that takes a timeout - it&#39;s possible for errors to occur
                during the pipeline execution, so we may never get a response (we&#39;ll
                talk more about error handling in a bit).</p>
                
                <h3 id="Raising_the_concurrency" onclick="window.location = '#Raising_the_concurrency'">Raising the concurrency</h3>
                
                <p>By default, each step gets assigned one thread (per cluster node) to
                handle its work. If our pipeline processes data at a rate that is
                slower than the rate of insertion at the head of the pipeline, we can
                increase the number of threads for each step with the <code>:concurrency</code>
                option (options are passed as keyword arguments after the list of
                functions). Let&#39;s alter our original pipeline definition to do that:</p>
                
                <pre class="syntax clojure">(defonce reverse-pl&#x000A;  (pl/pipeline :reverse-a-string&#x000A;    seq&#x000A;    reverse&#x000A;    (partial apply str)&#x000A;    :concurrency 5)) ;; 5 threads per step</pre>
                
                <p>But what if we have one step that is slower than the rest? Let&#39;s
                assume that <code>reverse</code> is the slowpoke here, and raise the
                <code>:concurrency</code> even higher for that step:</p>
                
                <pre class="syntax clojure">(defonce reverse-pl&#x000A;  (pl/pipeline :reverse-a-string&#x000A;    seq&#x000A;    (pl/step reverse :concurrency 10) ;; 10 threads for this guy&#x000A;    (partial apply str)&#x000A;    :concurrency 5)) ;; 5 threads for each of the other steps</pre>
                
                <p>Here we&#39;ve used the
                <a href="/builds/LATEST/html-docs/apidoc/immutant.pipeline.html#var-step">step</a> function
                to attach options to a particular step. Options attached to steps will
                override the corresponding pipeline option where it makes sense.</p>
                
                <h3 id="Handling_errors" onclick="window.location = '#Handling_errors'">Handling errors</h3>
                
                <p>Since pipelines are built on top of Immutant&#39;s
                <a href="/builds/LATEST/html-docs/messaging.html#messaging-receiving">message listeners</a>,
                the default error handling is what the messaging system provides: if
                an exception occurs during the execution of a step, the delivery of
                the data to that step is rolled back, and will be retried up to ten
                times. If you need errors to be handled differently, you can provide
                an error handler function that must take two arguments: the exception,
                and the original argument passed to the step that threw the exception:</p>
                
                <pre class="syntax clojure">(pl/pipeline :do-something-on-the-network&#x000A;    retrieve-a-url&#x000A;    process-url-contents&#x000A;    more-data-processing&#x000A;    :error-handler (fn [ex v] &#x000A;                     (when (instance? ex SomeNetworkException)&#x000A;                       (println "ERROR, skipping" pl/*current-step* ex)&#x000A;                       (pl/*pipeline* v :step pl/*next-step*)))) ;; jump to the next step</pre>
                
                <p>Above we have a simple error handler that demonstrates putting a value
                back onto the pipeline, but skips the current step. We do that using a
                few vars that are bound during a pipeline execution:</p>
                
                <ul>
                <li><a href="/builds/LATEST/html-docs/apidoc/immutant.pipeline.html#var-*pipeline*">*pipeline*</a> -
                bound to the currently active pipeline-fn</li>
                <li><a href="/builds/LATEST/html-docs/apidoc/immutant.pipeline.html#var-*current-step*">*current-step*</a> -
                bound to the name of the currently active step</li>
                <li><a href="/builds/LATEST/html-docs/apidoc/immutant.pipeline.html#var-*next-step*">*next-step*</a> -
                bound to the name of the next step</li>
                </ul>
                
                <p>If the error handler doesn&#39;t put the data back on to the pipeline,
                that particular pipeline execution is halted.</p>
                
                <p>You can also specify an <code>:error-handler</code> for a particular step, which
                will override the pipeline error handler.</p>
                
                <p>Let&#39;s see the above example again, but with a step-specific error handler
                that rethrows to trigger the default retry semantics:</p>
                
                <pre class="syntax clojure">(pl/pipeline :do-something-on-the-network&#x000A;    (pl/step retrieve-a-url &#x000A;      :error-handler (fn [ex v] &#x000A;                       (if (instance? ex SomeNetworkException)&#x000A;                         (println "ERROR retrieving url" v ", exiting:" ex) ;; exit the pipeline&#x000A;                         (throw x)))) ;; retry&#x000A;    process-url-contents&#x000A;    more-data-processing&#x000A;    :error-handler (fn [ex v] &#x000A;                     (when (instance? ex SomeNetworkException)&#x000A;                       (println "ERROR, skipping" pl/*current-step* ex)&#x000A;                       (pl/*pipeline* v :step pl/*next-step*))))</pre>
                
                <h3 id="Pipelines_within_pipelines" onclick="window.location = '#Pipelines_within_pipelines'">Pipelines within pipelines</h3>
                
                <p>Pipeline-fn&#39;s are just functions that happen to return a delay. To
                facilitate using pipelines within pipelines, any step result that can 
                be dereferenced is, automatically:</p>
                
                <pre class="syntax clojure">(defonce rev-emb-pl &#x000A;  (pl/pipeline :reverse-and-embiggen&#x000A;    reverse-pl &#x000A;    (memfn .toUpperCase) &#x000A;    #(str \¡ % \!)))&#x000A;&#x000A;(deref (rev-emb-pl "tiucsib") 1000 nil) ;; => "¡BISCUIT!"</pre>
                
                <p>Since it&#39;s possible for the result of a step to never arrive, you can
                control how long this automatic <code>deref</code> waits:</p>
                
                <pre class="syntax clojure">(defonce rev-emb-pl &#x000A;  (pl/pipeline :reverse-and-embiggen&#x000A;    reverse-pl &#x000A;    (memfn .toUpperCase) &#x000A;    #(str \¡ % \!)&#x000A;    :step-deref-timeout 60000)) ;; in ms, default is 10 seconds</pre>
                
                <p>Like <code>:concurrency</code> and <code>:error-handler</code>, <code>:step-deref-timeout</code> can be
                overridden on a per-step basis.</p>
                
                <h2 id="Availabilty" onclick="window.location = '#Availabilty'">Availabilty</h2>
                
                <p>Pipelines are currently available in the latest Immutant
                <a href="/builds/">incremental builds</a>, and will be part of 0.8.0, which
                should be released today.</p>
                
                <p>We haven&#39;t covered everything about pipelines here, see the
                <a href="/builds/LATEST/html-docs/messaging.html#messaging-pipelines">documentation</a>
                for more details. </p>
                
                <p>Pipeline support is an alpha feature at the moment, so its API is in
                flux - please give it a try and <a href="/community/">let us know</a> how we can
                improve it.</p>
                
                <p><em>Image credit: <a href="http://www.flickr.com/photos/worldbank/7342211086">World Bank Photo Collection</a></em></p>
              </div>
              <div class="tail">
                 <a href="http://immutant.org/news/2013/01/14/pipelines/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2012/06/26/transactions/">Introducing Distributed XA Transaction Support</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Jim Crossley
                </div>
                <div class="date">
                  Tuesday, June 26, 2012
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/transactions/">transactions</a>
                <a href="/news/tags/xa/">xa</a>
                <a href="/news/tags/caching/">caching</a>
                <a href="/news/tags/messaging/">messaging</a>
                <a href="/news/tags/enterprise/">enterprise</a>
                <a href="/news/tags/bears/">bears</a>
              </div>
              <div class="body">
                <p>We&#39;re as happy as <a href="http://www.youtube.com/watch?v=v6cY0zz-958">a bear in a koi pond</a> to announce support for
                Distributed (XA) Transactions in Immutant.</p>
                
                <p><a href="http://immutant.org/builds/LATEST/html-docs/messaging.html">Messaging</a> and <a href="http://immutant.org/builds/LATEST/html-docs/caching.html">Caching</a> resources in Immutant are now automatically
                transactional and XA capable. And we make it easy for you to create
                DataSources for your XA compliant SQL databases so that you can then
                define transactions incorporating all three types of resources in your
                Clojure applications.</p>
                
                <h2 id="Some_Background" onclick="window.location = '#Some_Background'">Some Background</h2>
                
                <p><a href="http://en.wikipedia.org/wiki/X/Open_XA">X/Open XA</a> is a standard specification for allowing multiple,
                independent resources to participate in a single, distributed
                transaction using a <a href="http://en.wikipedia.org/wiki/Two-phase_commit_protocol">two-phase commit (2PC)</a> protocol.</p>
                
                <p>Say your application stores data in more than one place, perhaps an
                Oracle database and a Postgres database. When a function in your
                application writes data to those two databases, XA can ensure that it
                doesn&#39;t leave your data in an inconsistent state when the Oracle
                database fails. ;-)</p>
                
                <p>To accomplish this, the commit and rollback methods are invoked not on
                any single resource like a JDBC or JMS connection but on a
                TransactionManager instead. Its job is to coordinate the commit or
                rollback of each resource involved in a particular transaction.</p>
                
                <h2 id="Defining_an_XA_Transaction" onclick="window.location = '#Defining_an_XA_Transaction'">Defining an XA Transaction</h2>
                
                <p>Let&#39;s start with an example:</p>
                
                <pre class="syntax clojure">  (ns xa.example&#x000A;    (:require [immutant.xa :as xa]&#x000A;              [immutant.cache :as cache]&#x000A;              [immutant.messaging :as msg]&#x000A;              [clojure.java.jdbc :as sql]))&#x000A;  &#x000A;  (defn do-three-things []&#x000A;    (xa/transaction&#x000A;     (sql/with-connection {:datasource my-ds}&#x000A;       (sql/insert-records :things {:name "foo"}))&#x000A;     (cache/put my-cache :a 1)&#x000A;     (msg/publish "/queue/test" "success!")))</pre>
                
                <p>The <code>do-three-things</code> function will insert a record into a SQL
                database, write an entry to a cache and publish a message to a queue,
                all within a single transaction. When it completes, either all of
                those things will have happened or none will, depending on whether an
                exception is tossed from the body passed to <code>xa/transaction</code>.</p>
                
                <p>By the way, don&#39;t let that <code>{:datasource my-ds}</code> spec throw you just
                yet. We&#39;re going to discuss that in a minute.</p>
                
                <p>So the <code>xa/transaction</code> macro starts a transaction, executes its body,
                and then commits the transaction unless an exception is caught, in
                which case the transaction is rolled back.</p>
                
                <h2 id="Transaction_Scope" onclick="window.location = '#Transaction_Scope'">Transaction Scope</h2>
                
                <p>I lied a little. The <code>xa/transaction</code> macro is really just an alias
                for the <code>required</code> macro in the <code>immutant.xa.transaction</code> namespace,
                which is one of six macros matching the
                <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html">transaction attributes for JEE Container-Managed Persistence</a>:
                <code>required</code>, <code>requires-new</code>, <code>not-supported</code>, <code>supports</code>, <code>mandatory</code>,
                and <code>never</code>. According to that spec, <code>required</code> is the default, so we
                alias it in the main <code>immutant.xa</code> namespace.</p>
                
                <p>These macros allow you to control the scope of your transactions when
                your functions call each other. For example,</p>
                
                <pre class="syntax clojure">  (ns xa.example ...)&#x000A;  (defn foo []&#x000A;    (xa/transaction&#x000A;     (do-three-things)))</pre>
                
                <p>Here, we have one function, <code>foo</code>, defining a transaction that calls
                another function, <code>do-three-things</code> that, as you recall from above,
                seemingly defines another transaction. Or does it? In fact, the
                <code>required</code> macro won&#39;t start a new transaction if there&#39;s already one
                associated with the current thread. It&#39;ll simply include its body in
                the transaction started by the caller. If we really wanted a new
                transaction, we&#39;d call <code>requires-new</code> inside <code>do-three-things</code>.</p>
                
                <p>Here&#39;s another example:</p>
                
                <pre class="syntax clojure">  (ns xa.example&#x000A;    (:require [immutant.xa.transaction :as tx]))&#x000A;  &#x000A;  (tx/required           ; begin tx #1&#x000A;   (one)&#x000A;   (tx/not-supported     ; suspend tx #1&#x000A;    (two))&#x000A;   (tx/requires-new      ; begin tx #2&#x000A;    (three))             ; commit tx #2&#x000A;   (throw (Exception.))) ; rollback tx #1</pre>
                
                <p>Here we have a function, <code>one</code>, running within a transaction that is
                suspended prior to calling the function <code>two</code>, that runs completely
                outside of any transaction, after which a second transaction is
                started before calling the function, <code>three</code>.</p>
                
                <p>We then toss an exception (we could&#39;ve also called
                <code>tx/set-rollback-only</code>) that causes everything we did in <code>one</code> to
                rollback. The exception does not affect what we did in <code>two</code> or
                <code>three</code>, however.</p>
                
                <p>Incidentally, any exception tossed in <code>two</code> or <code>three</code> would also
                rollback the actions of <code>one</code> since all the macros re-throw whatever
                they catch.</p>
                
                <h2 id="Creating_an_XA_DataSource" onclick="window.location = '#Creating_an_XA_DataSource'">Creating an XA DataSource</h2>
                
                <p>So now we&#39;ll discuss that <code>{:datasource my-ds}</code> spec from the first
                example.</p>
                
                <p>To include your database in a distributed transaction, you need to
                create an XA DataSource for it. Do this using the
                <code>immutant.xa/datasource</code> function. It will expect the appropriate JDBC
                driver for your database to be available in the classpath, so you&#39;ll
                need to add one of the following to your Leiningen <code>project.clj</code>:</p>
                
                <pre class="syntax clojure">  (defproject foo "1.0.0-SNAPSHOT"&#x000A;    :dependencies [[com.h2database/h2 "1.3.160"]              ; H2&#x000A;                   [org.clojars.gukjoon/ojdbc "1.4"]          ; Oracle&#x000A;                   [org.clojars.kjw/mysql-connector "5.1.11"] ; MySQL&#x000A;                   [postgresql "9.0-801.jdbc4"]               ; Postgres&#x000A;                   [net.sourceforge.jtds/jtds "1.2.4"]        ; MS SQL Server&#x000A;                   [java.jdbc "0.2.2"]])</pre>
                
                <p>The comments on the right indicate the database types we currently
                support, and the versions above have been successfully tested on
                Immutant.</p>
                
                <p>With the driver available, all that&#39;s left is to create the
                DataSource. Here are some examples from our integration tests:</p>
                
                <pre class="syntax clojure">  (defonce my-ds (xa/datasource "h2" {:adapter "h2" :database "mem:foo"}))&#x000A;  (defonce my-ds (xa/datasource "oracle" &#x000A;                                {:adapter "oracle"&#x000A;                                 :host "oracle.cpct4icp7nye.us-east-1.rds.amazonaws.com"&#x000A;                                 :username "myuser"&#x000A;                                 :password "mypassword"&#x000A;                                 :database "mydb"}))&#x000A;  (defonce my-ds (xa/datasource "mysql" &#x000A;                                {:adapter "mysql"&#x000A;                                 :host "mysql.cpct4icp7nye.us-east-1.rds.amazonaws.com"&#x000A;                                 :username "myuser"&#x000A;                                 :password "mypassword"&#x000A;                                 :database "mydb"}))&#x000A;  (defonce my-ds (xa/datasource "postgres" &#x000A;                                {:adapter "postgresql"&#x000A;                                 :username "myuser"&#x000A;                                 :password "mypassword"&#x000A;                                 :database "mydb"}))&#x000A;  (defonce my-ds (xa/datasource "mssql" &#x000A;                                {:adapter "mssql"&#x000A;                                 :host "mssql.cpct4icp7nye.us-east-1.rds.amazonaws.com"&#x000A;                                 :username "myuser"&#x000A;                                 :password "mypassword"&#x000A;                                 :database "mydb"}))</pre>
                
                <p>To use one of those in a <code>clojure.java.jdbc</code> connection spec, you
                should associate it with the <code>:datasource</code> key, like so:</p>
                
                <pre class="syntax clojure">  (jdbc/with-connection {:datasource my-ds}&#x000A;    (jdbc/create-table :things [:name "varchar(50)"]))</pre>
                
                <p>This should of course work with any Clojure SQL library built on
                <code>clojure.java.jdbc</code>, e.g. <a href="http://sqlkorma.com/">Korma</a>, <a href="http://clojureql.org/">ClojureQL</a>, <a href="https://github.com/budu/lobos">Lobos</a>, etc.</p>
                
                <p>See the <a href="http://immutant.org/builds/LATEST/html-docs/transactions.html">manual</a> for more details.</p>
                
                <h2 id="Conclusion" onclick="window.location = '#Conclusion'">Conclusion</h2>
                
                <p>XA is not for every application. It&#39;s useful when you have multiple
                JDBC backends or you need to synchronize your JDBC and JMS (HornetQ
                messaging) calls. Transactional data-grids (Infinispan caching) are
                also often handy, so we feel good about making all of these resources
                automatically transactional in Immutant, not to mention providing
                clean Clojure interfaces for them.</p>
                
                <p>Distributed transactions are available now in our
                <a href="http://immutant.org/builds/">latest incremental builds</a> and will of course be
                included in our upcoming 0.2.0 release of Immutant expected in the
                next week or so. As always, feel free to
                <a href="http://immutant.org/community/">find us in the normal channels</a> if you have any questions.</p>
              </div>
              <div class="tail">
                 <a href="http://immutant.org/news/2012/06/26/transactions/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="pagination-links"><a href="/news/tags/messaging/" class="previous-link">Previous</a> <a href="/news/tags/messaging/" class="page-link">1</a> <span class="current-page">2</span> <a href="/news/tags/messaging/page/3.html" class="page-link">3</a> <a href="/news/tags/messaging/page/3.html" class="next-link">Next</a> </div>
          </div>
          <div class="span4" id="sidebar-column">
            <div class="tags">
              <div class="tag-cloud">
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/announcement/">announcement</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/app-server/">app-server</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/bears/">bears</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/beginning/">beginning</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/boot/">boot</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/boot-immutant/">boot-immutant</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/caching/">caching</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/clustering/">clustering</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/daemons/">daemons</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/datomic/">datomic</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/deploy/">deploy</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/distribution/">distribution</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/enterprise/">enterprise</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/event/">event</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/first/">first</a>
                </span>
                <span class="tag tag-2">
                  <a href="http://immutant.org/news/tags/getting-started/">getting-started</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/hotrod/">hotrod</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/infinispan/">infinispan</a>
                </span>
                <span class="tag tag-2">
                  <a href="http://immutant.org/news/tags/installation/">installation</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/isolation/">isolation</a>
                </span>
                <span class="tag tag-2">
                  <a href="http://immutant.org/news/tags/lein/">lein</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/lein-immutant/">lein-immutant</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/luminus/">luminus</a>
                </span>
                <span class="tag tag-2">
                  <a href="http://immutant.org/news/tags/messaging/">messaging</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/openshift/">openshift</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/overlay/">overlay</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/pipelines/">pipelines</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/polyglot/">polyglot</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/poorsmatic/">poorsmatic</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/postgresql/">postgresql</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/presentations/">presentations</a>
                </span>
                <span class="tag tag-6">
                  <a href="http://immutant.org/news/tags/releases/">releases</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/ring/">ring</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/runtime/">runtime</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/scheduled-jobs/">scheduled-jobs</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/scheduling/">scheduling</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/screencast/">screencast</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/slim/">slim</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/sockjs/">sockjs</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/survey/">survey</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/thedeuce/">thedeuce</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/torquebox/">torquebox</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/transactions/">transactions</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/transit/">transit</a>
                </span>
                <span class="tag tag-3">
                  <a href="http://immutant.org/news/tags/tutorial/">tutorial</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/under-the-hood/">under-the-hood</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/vertx/">vertx</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/web/">web</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/websockets/">websockets</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/wildfly/">wildfly</a>
                </span>
                <span class="tag tag-1">
                  <a href="http://immutant.org/news/tags/wtf/">wtf</a>
                </span>
                <span class="tag tag-0">
                  <a href="http://immutant.org/news/tags/xa/">xa</a>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="footer-push"></div>
    </div>
    <div id="footer">
      <div class="container">
        <div class="row" id="bottom-nav">
          <div class="span8">
            <div id="legal">
              <p>The Immutant project is a member of the <a href="http://jboss.org/">JBoss
              Community</a> and produced by the
              <a href="http://projectodd.org/">Project:odd</a> team.  It is a
              community-driven open-source project, and is licensed under
              the <a href="/license-lgpl.txt">GNU LGPL</a> or <a href="/license-asl.txt">Apache Software
              License</a>, depending on the version.</p>
              
              <p>Copyright 2011 - 2017 <a href="http://redhat.com/">Red Hat, Inc.</a>
              Immutant&trade; is a trademark of Red Hat, Inc.</p>
              
              <p>Content licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
            </div>
          </div>
          <div class="span4">
            <div id="badges">
              <a href="http://jboss.org/"><img id="jbosscommunity-logo" src="http://torquebox.org/images/jbosscommunity-logo.png"></a>
              <a href="http://projectodd.org/"><img id="projectodd-logo" src="http://projectodd.org/images/projectodd-logo.png"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/javascripts/bootstrap-collapse.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-dropdown.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-tab.js" type="text/javascript"></script>
    <script>
      $( function () {
         var syntax_root = "/javascripts/jquery-syntax/"
      
         if (!$.browser.msie && $( '.syntax' ).length) {
           $.getScript( syntax_root + "jquery.syntax.min.js", function () {
             $.syntax( {root: syntax_root,
                       blockLayout: 'plain'} )
           } )
         }
       } )
    </script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-6435340-7', 'auto');
    ga('send', 'pageview');
    </script>
  </body>
</html>
