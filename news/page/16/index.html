<!DOCTYPE html>
<html>
  <head>
    <title>
      Immutant | News
    </title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link href="/news.atom" rel="alternate" type="application/atom+xml">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/dateformat.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">
            <img id="logo" src="/images/logos/logo-horizontal-centered.png">
          </a>
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/news/">News</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/community/">Community</a>
              </li>
              <li>
                <a href="/development/">Development</a>
              </li>
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                  Quick Links
                  <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <li>
                    <a href="/documentation/current/apidoc/">2.x API Docs & Guides</a>
                  </li>
                  <li>
                    <a href="/builds/2x/">2.x Incremental Builds</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="/documentation/1.1.4/" rel="nofollow">1.x Manual</a>
                  </li>
                  <li>
                    <a href="/documentation/1.1.4/apidoc/" rel="nofollow">1.x API Docs</a>
                  </li>
                  <li>
                    <a href="/tutorials-1x/" rel="nofollow">1.x Tutorials</a>
                  </li>
                  <li>
                    <a href="/builds/" rel="nofollow">1.x Incremental Builds</a>
                  </li>
                  <li class="divider"></li>
                  <li>
                    <a href="/releases/">All Versioned Releases</a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/browse/IMMUTANT">Issues</a>
                  </li>
                  <li>
                    <a href="http://webchat.freenode.net/?channels=immutant">#immutant on IRC</a>
                  </li>
                  <li>
                    <a href="https://github.com/immutant/immutant">Source</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div id="wrapper">
      <div class="container" id="main-content">
        <div class="page-header">
          <h1>
            News
          </h1>
        </div>
        <div class="row">
          <div class="span8" id="main-column">
            <div class="post">
              <h2 class="title">
                <a href="/news/2012/02/09/scheduling/">Getting Started: Scheduling Jobs</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Toby Crawley
                </div>
                <div class="date">
                  Thursday, February  9, 2012
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/tutorial/">tutorial</a>
                <a href="/news/tags/getting-started/">getting-started</a>
                <a href="/news/tags/scheduled-jobs/">scheduled-jobs</a>
              </div>
              <div class="body">
                <div class="notice big">
                
                  Note: this article is out of date. For more recent instructions on using
                  scheduled jobs, see the <a href="/tutorials/jobs/">tutorial</a>.
                
                </div>
                
                <p>This article covers job schedulding in Immutant, and is part of our
                <a href="/news/tags/getting-started/">getting started series of tutorials</a>. </p>
                
                <p>Jobs in Immutant are simply functions that execute on a recurring 
                schedule. They fire asynchronously, outside of the thread where they are 
                defined, and fire in the same runtime as the rest of the application, so 
                have access to any shared state.</p>
                
                <p>Jobs are built on top of the <a href="http://quartz-scheduler.org/">Quartz</a> library, and support scheduling via a 
                cron-like specification. </p>
                
                <h2 id="Why_would_I_use_this_over_quartz-clj_or_calling_Quartz_directly?" onclick="window.location = '#Why_would_I_use_this_over_quartz-clj_or_calling_Quartz_directly?'">Why would I use this over quartz-clj or calling Quartz directly?</h2>
                
                <p>I&#39;m glad you asked! There are several reasons:</p>
                
                <ul>
                <li>Immutant abstracts away the complexity of Quartz&#39;s internals, so you don&#39;t
                have to worry about managing <a href="http://quartz-scheduler.org/api/1.8.5/org/quartz/Scheduler.html">Schedulers</a> and creating <a href="http://quartz-scheduler.org/api/1.8.5/org/quartz/JobDetail.html">JobDetails</a>, and
                provides enough functionality for a majority of use cases. For 
                cases where you need advanced scheduling functionality, you can still use
                <a href="https://github.com/mdpendergrass/quartz-clj">quartz-clj</a> or the Quartz classes directly.</li>
                <li>If you are using Immutant in a cluster, jobs that should fire only once per
                cluster (aka &#39;singleton jobs&#39;) are handled automatically (see below).</li>
                <li>When your application is undeployed, your jobs are automatically unscheduled.
                Note that if you use quartz-clj or Quartz directly from your application,
                you&#39;ll need  to clean up after yourself so you don&#39;t leave jobs lingering around 
                since Immutant can&#39;t automatically unschedule them for you.</li>
                </ul>
                
                <h2 id="Scheduling_Jobs" onclick="window.location = '#Scheduling_Jobs'">Scheduling Jobs</h2>
                
                <p>Scheduling a job is as simple as calling the <code>schedule</code>  function from the
                <code>immutant.jobs</code> namespace:</p>
                
                <pre class="syntax clojure">(require '[immutant.jobs :as jobs])&#x000A;(jobs/schedule "my-job-name" "*/5 * * * * ?" &#x000A;                #(println "I was called!"))</pre>
                
                <p>The <code>schedule</code> function requires three arguments:</p>
                
                <ul>
                <li><em>name</em> - the name of the job.</li>
                <li><em>spec</em> - the cron-style specification string (see below).</li>
                <li><em>f</em> - the zero argument function that will be invoked each time the job fires.</li>
                </ul>
                
                <p>Job scheduling is dynamic, and can occur anywhere in your application code. 
                Jobs that share the lifecycle of your application are idiomatically placed in <code>immutant.clj</code>.</p>
                
                <p>You can safely call <code>schedule</code> multiple times with the same job name - the named job will 
                rescheduled.</p>
                
                <h2 id="Cron_Sytanx" onclick="window.location = '#Cron_Sytanx'">Cron Sytanx</h2>
                
                <p>The spec attribute should contain a crontab-like entry. This is similar to cron specifications
                used by Vixie cron, anacron and friends, but includes an additional field for specifying seconds.
                It is composed of 7 fields (6 are required):</p>
                
                <table class="fancy">
                    <tr><th>Seconds</th><th>Minutes</th><th>Hours</th><th>Day of Month</th><th>Month</th><th>Day of Week</th><th>Year</th></tr>
                    <tr><td>0-59</td><td>0-59</td><td>0-23</td><td>1-31</td><td>1-12 or JAN-DEC</td><td>1-7 or SUN-SAT</td><td>1970-2099 (optional)</td></tr>
                </table>
                
                <p>For several fields, you may denote subdivision by using the forward-slash (/) character. To execute a job 
                every 5 minutes, */5 in the minutes field would specify this condition.</p>
                
                <p>Spans may be indicated using the dash (-) character. To execute a job Monday through Friday, MON-FRI 
                should be used in the day-of-week field.</p>
                
                <p>Multiple values may be separated using the comma (,) character. The specification of 1,15 in the 
                day-of-month field would result in the job firing on the 1st and 15th of each month.</p>
                
                <p>Either day-of-month or day-of-week must be specified using the ? character, since specifying
                both is contradictory.</p>
                
                <p>See the <a href="http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/TutorialLesson06">Quartz cron specification</a> for additional details.</p>
                
                <h2 id="Unscheduling_Jobs" onclick="window.location = '#Unscheduling_Jobs'">Unscheduling Jobs</h2>
                
                <p>Jobs can be unscheduled via the <code>unschedule</code> function:</p>
                
                <pre class="syntax clojure">(require '[immutant.jobs :as jobs])&#x000A;    &#x000A;(jobs/unschedule "my-job-name")</pre>
                
                <p>The <code>unschedule</code> function requires one argument:</p>
                
                <ul>
                <li><em>name</em> - the name of a previously scheduled job.</li>
                </ul>
                
                <p>If the given name resolves to an existing job, that job will be unscheduled and the call will
                return <code>true</code>, otherwise <code>nil</code> is returned.</p>
                
                <p>Jobs are automatically unscheduled when your application is undeployed.</p>
                
                <h2 id="Clustering" onclick="window.location = '#Clustering'">Clustering</h2>
                
                <p>When using Immutant in a cluster, you&#39;ll need to mark any jobs that should only be scheduled
                once for the entire cluster with the <code>:singleton</code> option:</p>
                
                <pre class="syntax clojure">(require '[immutant.jobs :as jobs])&#x000A;(jobs/schedule "my-job-name" "*/5 * * * * ?" &#x000A;                #(println "I only fire on one node")&#x000A;                :singleton true)</pre>
                
                <p>If <code>:singleton</code> is <code>true</code>, the job will be scheduled to run on only one node in the cluster
                at a time. If that node goes down, the job will automatically be scheduled on another node, giving
                you failover. If <code>:singleton</code> is <code>false</code> or not provided, the job will be scheduled to run on
                all nodes where the <code>schedule</code> call is executed.</p>
                
                <p>Look for a future post in our <a href="/news/tags/getting-started/">Getting Started series</a> on using Immutant in
                a cluster.</p>
                
                <h2 id="The_Future" onclick="window.location = '#The_Future'">The Future</h2>
                
                <p>Currently, jobs can only be scheduled using <a href="http://quartz-scheduler.org/api/1.8.5/org/quartz/CronTrigger.html">CronTrigger</a> functionality. We plan to add
                support for <a href="or" title="at">SimpleTrigger</a> functionality at some point in the future, 
                allowing you to do something similar to:</p>
                
                <pre class="syntax clojure">(require '[immutant.jobs :as jobs])&#x000A;(jobs/schedule "my-at-job" (jobs/every "3s" :times 5)&#x000A;                #(println "I fire 5 times, every 3 seconds"))</pre>
                
                <p>Since Immutant is still in a pre-alpha state, none of what I said above is set in stone. If 
                anything does change, We&#39;ll update this post to keep it accurate. </p>
                
                <p>If you have any feedback or questions, <a href="/community">get in touch</a>! </p>
              </div>
              <div class="tail">
                 <a href="/news/2012/02/09/scheduling/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2012/01/17/messaging/">Getting Started: Messaging</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Jim Crossley
                </div>
                <div class="date">
                  Tuesday, January 17, 2012
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/messaging/">messaging</a>
                <a href="/news/tags/tutorial/">tutorial</a>
                <a href="/news/tags/getting-started/">getting-started</a>
              </div>
              <div class="body">
                <p>Happy 2012! For the next installment of our
                <a href="/news/tags/getting-started/">getting started series</a> we&#39;ll explore the
                <a href="https://github.com/immutant/immutant/blob/master/modules/messaging/src/main/clojure/immutant/messaging.clj">messaging abstractions</a> available to your Clojure
                apps when deployed on Immutant. Because Immutant is built atop
                <a href="http://www.jboss.org/jbossas">JBoss AS7</a>, it includes the excellent <a href="http://hornetq.org">HornetQ</a> messaging
                service built right in. Hence, there is nothing extra to install or
                configure in order for your applications to benefit from asynchronous
                messaging.</p>
                
                <h2 id="Destinations_are_either_Queues_or_Topics" onclick="window.location = '#Destinations_are_either_Queues_or_Topics'">Destinations are either Queues or Topics</h2>
                
                <p>Two types of message destinations, or endpoints, are supported:
                <strong>queues</strong> and <strong>topics</strong>. A queue exhibits <em>point-to-point</em>
                semantics: a message sent to a queue will be delivered to a single
                recipient. A <em>topic</em> provides <em>publish-subscribe</em> semantics: messages
                sent to a topic will be delivered to all subscribed recipients. In
                both cases, the message producers have no direct knowledge of the
                message consumers.</p>
                
                <p>Use the <code>start</code> function to define a messaging destination. A simple
                naming convention designates an endpoint as either a queue or a topic:
                if its name begins with <code>/queue</code>, it&#39;s a queue; if it begins with
                <code>/topic</code>, it&#39;s a topic.</p>
                
                <pre class="syntax clojure">(require '[immutant.messaging :as msg])&#x000A;(msg/start "/queue/work")   ; to start a queue&#x000A;(msg/start "/topic/news")   ; to start a topic</pre>
                
                <p>You can invoke <code>start</code> from anywhere in your application, but
                typically it&#39;s done in the <code>immutant.clj</code> initialization file, as
                described in <a href="/news/2011/11/08/deploying-an-application/">an earlier tutorial</a>.</p>
                
                <p>While <code>start</code> has a complement, <code>stop</code>, you needn&#39;t call it
                directly. It will be invoked when your application is undeployed. And
                it&#39;s important to note that <code>start</code> is idempotent: if an endpoint has
                already been started, likely by a cooperating application, the call is
                effectively a no-op. Similarly, a call to <code>stop</code> will silently fail if
                the endpoint is in use by any other application. The last to leave
                will turn the lights out.</p>
                
                <h2 id="One_Way_to_Produce_Messages" onclick="window.location = '#One_Way_to_Produce_Messages'">One Way to Produce Messages</h2>
                
                <h3 id="publish" onclick="window.location = '#publish'">publish</h3>
                
                <p>Messages are sent to a destination, whether queue or topic, via a
                single function, <code>publish</code>, to which is passed the destination name
                and the message content, which can be just about anything.  A number
                of optional key-value parameters may be passed as well.</p>
                
                <ul>
                <li><code>:encoding</code> may be either <code>:clojure</code> (the default), <code>:json</code> (useful
                with non-clojure consumers) or <code>:text</code> (no encoding)</li>
                <li><code>:priority</code> may be an integer between 0-9, inclusive. Convenient
                keyword values <code>:low</code>, <code>:normal</code>, <code>:high</code> and <code>:critical</code> correspond
                to 0, 4, 7 and 9, respectively. 4 is the default.</li>
                <li><code>:ttl</code> time-to-live may be specified in milliseconds, after which
                time the message is discarded if not consumed. Default is 0,
                i.e. forever.</li>
                <li><code>:properties</code> is a hash of arbitrary message metadata upon which JMS
                selector expressions may be constructed to filter received messages.</li>
                </ul>
                
                <p>Some examples:</p>
                
                <pre class="syntax clojure">;; A simple string&#x000A;(msg/publish "/queue/work" "simple string")&#x000A;;; Notify everyone something interesting just happened&#x000A;(msg/publish "/topic/news" {:event "VISIT" :url "/sales-inquiry"})&#x000A;;; Move this message to the front of the line&#x000A;(msg/publish "/queue/work" some-message :priority :high :ttl 1000)&#x000A;;; Make messages as complex as necessary&#x000A;(msg/publish "/queue/work" {:a "b" :c [1 2 3 {:foo 42}]})&#x000A;;; Make messages consumable by a Ruby app&#x000A;(msg/publish "/queue/work" {:a "b" :c [1 2 3 {:foo 42}]} :encoding :json)</pre>
                    
                
                <h2 id="Three_Ways_to_Consume_Messages" onclick="window.location = '#Three_Ways_to_Consume_Messages'">Three Ways to Consume Messages</h2>
                
                <h3 id="receive" onclick="window.location = '#receive'">receive</h3>
                
                <p>Block on a call to <code>receive</code>, passing a destination name and
                optionally, the following:</p>
                
                <ul>
                <li><code>:timeout</code> an expiration in milliseconds, after which nil is
                returned. Default is 0, i.e. wait forever</li>
                <li><code>:selector</code> a JMS expression used to filter messages according
                to the values of arbitrary <code>:properties</code>. For documentation on
                JMS selector syntax please see the javadoc for
                <a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html">javax.jms.Message</a>.</li>
                </ul>
                
                <h3 id="listen" onclick="window.location = '#listen'">listen</h3>
                
                <p>Pass a destination name and function to <code>listen</code> and the decoded
                content of a message sent to that destination will be passed to the
                function. Options include:</p>
                
                <ul>
                <li><code>:concurrency</code> the maximum number of listening threads that can
                simultaneouly call the function. Default is 1.</li>
                <li><code>:selector</code> same as <code>:receive</code></li>
                </ul>
                
                <h3 id="message-seq" onclick="window.location = '#message-seq'">message-seq</h3>
                
                <p>Create a lazy sequence of messages via <code>message-seq</code>, which accepts
                the same options as <code>receive</code>.</p>
                
                <p>Some examples:</p>
                
                <pre class="syntax clojure">;; Wait on a task&#x000A;(let [task (msg/receive "/queue/work")]&#x000A;  (perform task))&#x000A;&#x000A;;; Case-sensitive work queues?&#x000A;(msg/listen "/queue/lower" #(msg/publish "/queue/upper" (.toUpperCase %)))&#x000A;&#x000A;;; Contrived laziness&#x000A;(let [messages (message-seq queue)]&#x000A;  (doseq [i (range 4)] (publish queue i))&#x000A;  (= (range 4) (take 4 messages)))</pre>
                
                <h2 id="Language_Interop" onclick="window.location = '#Language_Interop'">Language Interop</h2>
                
                <p>One of our initial goals for Immutant messaging was simple interop
                between Ruby and Clojure applications deployed on a single
                platform. <a href="/">TorqueBox</a> Ruby processors already grok the <code>:json</code>
                encoding and will automatically decode the message into the analogous
                Ruby data structures, so as long as you limit the content of your
                messages to standard collections and types, they are transparently
                interoperable between Clojure and Ruby in either direction. See the
                <a href="/news/2011/12/21/overlay/">overlay</a> post for more details on TorqueBox/Immutant integration.</p>
                
                <p>Of course, the <code>:json</code> encoding enables other JVM-based languages --
                anything you could conceivably cram into a war file -- to join in the
                fun, too. For non-JVM languages or external endpoints, something like
                the Pipes and Filters API&#39;s provided by <a href="https://github.com/sbtourist/clamq">Clamq</a> could be used since
                we expose our JMS connection factory as
                <code>immutant.messaging.core/connection-factory</code>.</p>
                
                <h2 id="Anything_Else?" onclick="window.location = '#Anything_Else?'">Anything Else?</h2>
                
                <p>Another advantage we get from AS7 is its clustering support. Once we
                work out some small integration bits, message distribution across a
                cluster of dynamic nodes will be automatically load-balanced and
                fault-tolerant, with minimal to no configuration required.</p>
                
                <p>Of course, we still have other messaging features on our roadmap,
                e.g. XA transactions, durable subscribers and synchronous
                request/response, and we&#39;re looking for ways to make container-based
                deployment more developer-friendly, so there&#39;s still much to do. Feel
                free to follow along on
                <a href="/community/">Twitter, IRC, or the mailing list</a>.</p>
              </div>
              <div class="tail">
                 <a href="/news/2012/01/17/messaging/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2011/12/21/overlay/">Hey, you got your Ruby in my Clojure!</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Jim Crossley
                </div>
                <div class="date">
                  Wednesday, December 21, 2011
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/overlay/">overlay</a>
                <a href="/news/tags/torquebox/">torquebox</a>
                <a href="/news/tags/polyglot/">polyglot</a>
                <a href="/news/tags/app-server/">app-server</a>
              </div>
              <div class="body">
                <div class="notice big">
                
                  <i><b>UPDATE</b></i>: This article is obsolete. See <a
                  href="/tutorials/overlay/">the Overlay Tutorial</a> for current
                  documentation and examples.
                
                </div>
                
                <p>Recently, we&#39;ve made some progress toward the promise of a polyglot
                application server. With the introduction of the <a href="http://github.com/immutant/overlay">Overlay</a> project,
                it&#39;s now very easy to create a single app server capable of deploying
                both Ruby and Clojure (not to mention Java, of course) applications.</p>
                
                <h2 id="Laying_TorqueBox_over_Immutant" onclick="window.location = '#Laying_TorqueBox_over_Immutant'">Laying TorqueBox over Immutant</h2>
                
                <p>The same <a href="/news/2011/12/21/installing-redux/">Leiningen Immutant plugin</a> that you use to install
                Immutant may be used to overlay the latest <a href="/">TorqueBox</a> as well:</p>
                
                <pre><code>$ lein immutant overlay torquebox&#x000A;</code></pre>
                
                <p>And voila, your Immutant is suddenly also a TorqueBox! Now we need to
                set up your environment for TorqueBox development.</p>
                
                <pre><code>$ export TORQUEBOX_HOME=$HOME/.lein/immutant/current&#x000A;$ export PATH=$TORQUEBOX_HOME/jruby/bin:$PATH&#x000A;</code></pre>
                
                <p>The TorqueBox distribution provides its own JRuby with the TorqueBox
                gems pre-installed. You can now use the <code>torquebox</code> command to deploy
                your Ruby applications to your Immutant!</p>
                
                <h2 id="Laying_Immutant_over_TorqueBox" onclick="window.location = '#Laying_Immutant_over_TorqueBox'">Laying Immutant over TorqueBox</h2>
                
                <p>If you&#39;d rather use your own JRuby, and you&#39;ve already installed the
                <code>torquebox-server</code> gem, you can overlay the latest Immutant by cloning
                the <a href="http://github.com/immutant/overlay">Overlay</a> project locally, installing <a href="https://github.com/technomancy/leiningen">Leiningen</a> and running the
                following:</p>
                
                <pre><code>$ lein run :overlay $(torquebox env TORQUEBOX_HOME) immutant&#x000A;</code></pre>
                
                <p>All that&#39;s left is to set <code>IMMUTANT_HOME</code> and <a href="/news/2011/11/08/deploying-an-application/">proceed as you normally would</a>:</p>
                
                <pre><code>$ export IMMUTANT_HOME=$(torquebox env TORQUEBOX_HOME)&#x000A;</code></pre>
                
                <p>The <a href="http://github.com/immutant/overlay">Overlay</a> project is capable of overlaying features from any JBoss
                AS7 distribution onto another one.</p>
                
                <h2 id="Convenient_Combo-Pack" onclick="window.location = '#Convenient_Combo-Pack'">Convenient Combo-Pack</h2>
                
                <p>For your convenience, we&#39;ve set up a job on our CI server to overlay
                the latest Immutant build atop the latest <a href="/">TorqueBox</a> build whenever
                either is updated. So you can be on the bleeding edge of both projects
                by downloading and extracting this link:</p>
                
                <p><a href="/builds/torquebox-immutant.zip">http://immutant.org/builds/torquebox-immutant.zip</a></p>
                
                <p>Set both <code>TORQUEBOX_HOME</code> and <code>IMMUTANT_HOME</code> to the extracted
                directory, and...</p>
                
                <h2 id="Get_Your_Polyglot_On!" onclick="window.location = '#Get_Your_Polyglot_On!'">Get Your Polyglot On!</h2>
                
                <p>Your overlaid server may be started however you&#39;re comfortable: either
                using the <a href="https://github.com/technomancy/leiningen">Leiningen</a> Immutant plugin, the <a href="/">TorqueBox</a> command or even
                the standard JBoss commands. It will start up all the apps you&#39;ve
                deployed to it, regardless of their language.</p>
                
                <p>If you have any trouble at all, please drop by #torquebox or #immutant
                on freenode, and we&#39;ll get you going.</p>
              </div>
              <div class="tail">
                 <a href="/news/2011/12/21/overlay/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2011/12/21/installing-redux/">Getting Started: Installing Immutant v2</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Toby Crawley
                </div>
                <div class="date">
                  Wednesday, December 21, 2011
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/installation/">installation</a>
                <a href="/news/tags/lein/">lein</a>
                <a href="/news/tags/tutorial/">tutorial</a>
                <a href="/news/tags/getting-started/">getting-started</a>
              </div>
              <div class="body">
                <p>Greetings! This article covers the new, improved method for installing Immutant, and
                replaces the <a href="/news/2011/11/08/installing/">first</a> in the <a href="/news/tags/getting-started/">getting started series of tutorials</a>
                with Immutant. This entry covers setting up a development environment and installing
                Immutant. This tutorial assumes you are on a *nix system. It also assumes you have 
                <a href="https://github.com/technomancy/leiningen">Leiningen</a> installed. If not, follow <a href="https://github.com/technomancy/leiningen#readme">these instructions</a>, then come back here.</p>
                
                <h2 id="Installing_the_lein_plugin" onclick="window.location = '#Installing_the_lein_plugin'">Installing the lein plugin</h2>
                
                <p>We provide a <a href="https://github.com/immutant/lein-immutant/">lein plugin</a> for creating your Immutant applications and 
                managing their life-cycles. As of this post, the latest version of the plugin 
                is 0.3.1. Check <a href="http://clojars.org/lein-immutant">clojars</a> for the current version.</p>
                
                <p>Let&#39;s install it as a global plugin:</p>
                
                <pre><code> $ lein plugin install lein-immutant 0.3.1&#x000A;Copying 3 files to /a/nice/long/tmp/path/lib&#x000A;Including lein-immutant-0.3.1.jar&#x000A;Including clojure-1.2.0.jar&#x000A;Including clojure-contrib-1.2.0.jar&#x000A;Including data.json-0.1.1.jar&#x000A;Including fleet-0.9.5.jar&#x000A;Including overlay-1.0.1.jar&#x000A;Including progress-1.0.1.jar&#x000A;Created lein-immutant-0.3.0.jar&#x000A;</code></pre>
                
                <p>Now, run <code>lein immutant</code> to see what tasks the plugin provides:</p>
                
                <pre><code> $ lein immutant&#x000A;Manage the deployment lifecycle of an Immutant application.&#x000A;&#x000A;Subtasks available:&#x000A;install    Downloads and installs Immutant&#x000A;overlay    Overlays features onto ~/.lein/immutant/current or $IMMUTANT_HOME&#x000A;env        Displays paths to the Immutant that the plugin can find&#x000A;new        Creates a new project skeleton initialized for Immutant&#x000A;init       Adds a sample immutant.clj configuration file to an existing project&#x000A;deploy     Deploys the current project to the Immutant specified by ~/.lein/immutant/current or $IMMUTANT_HOME&#x000A;undeploy   Undeploys the current project from the Immutant specified by ~/.lein/immutant/current or $IMMUTANT_HOME&#x000A;run        Starts up the Immutant specified by ~/.lein/immutant/current or $IMMUTANT_HOME, displaying its console output&#x000A;</code></pre>
                
                <p>We&#39;ll only talk about the <code>install</code> and <code>run</code> tasks in this article -
                we covered the application specific management tasks in our <a href="/news/2011/11/08/deploying-an-application/">second tutorial</a>, 
                and cover <code>overlay</code> in <a href="/news/2011/12/21/overlay/">its own article</a>.</p>
                
                <h2 id="Installing_Immutant" onclick="window.location = '#Installing_Immutant'">Installing Immutant</h2>
                
                <p>Now we need to install an Immutant distribution. We&#39;ve yet to make any official
                releases, but our <a href="https://projectodd.ci.cloudbees.com/view/Immutant/">CI</a> server is setup to publish an <a href="/builds">incremental build</a> every time
                we push to the <a href="https://github.com/immutant/immutant">git repo</a>. The latest incremental build is always available at
                <a href="/builds/immutant-dist-bin.zip">http://immutant.org/builds/immutant-dist-bin.zip</a>. The <a href="/news/2011/11/08/installing/">previous version</a> of 
                this tutorial walked you through downloading and installing the latest incremental
                manually, but with the new <code>install</code> task, that&#39;s no longer necessary - the
                <code>install</code> task will download and install the latest incremental build for you. 
                Let&#39;s see that in action:</p>
                
                <pre><code> $ lein immutant install&#x000A;Downloading http://repository-projectodd.forge.cloudbees.com/incremental/immutant/LATEST/immutant-dist-bin.zip&#x000A;done!                                                                           &#x000A;Extracting /a/nice/long/tmp/path/lib/immutant-dist-bin.zip&#x000A;Extracted /Users/tobias/.lein/immutant/releases/immutant-1.x.incremental.51&#x000A;Linking /Users/tobias/.lein/immutant/current to /Users/tobias/.lein/immutant/releases/immutant-1.x.incremental.51&#x000A;</code></pre>
                
                <p>Part of the install process links the most recently installed version to 
                <code>~/.lein/immutant/current</code> so the plugin can find the Immutant install without
                requiring you to set <code>$IMMUTANT_HOME</code>. If <code>$IMMUTANT_HOME</code> is set, it will
                override the <code>current</code> link. </p>
                
                <p>If you want to install a specific incremental build, specify the build number
                (available from our <a href="/builds">builds page</a>) as an argument to lein:</p>
                
                <pre><code> $ lein immutant install 50&#x000A;</code></pre>
                
                <p>You can also have it install to a directory of your choosing (if you want the latest
                build, specify &#39;latest&#39; as the version):</p>
                
                <pre><code> $ lein immutant install latest /some/other/path&#x000A;</code></pre>
                
                <p><code>~/.lein/immutant/current</code> will be linked to that location.</p>
                
                <h2 id="Running_Immutant" onclick="window.location = '#Running_Immutant'">Running Immutant</h2>
                
                <p>To verify that Immutant is properly installed, let&#39;s fire it up. To do so, 
                use the <code>lein immutant run</code> command. This is a convenient way to start the Immutant&#39;s 
                JBoss server, and will run in the foreground displaying the console log. 
                You&#39;ll see lots of log messages that you can ignore - the
                one to look for should be the last message, and will tell you the Immutant was properly
                started:</p>
                
                <pre><code> $ lein immutant run&#x000A;Starting Immutant via /Users/tobias/.lein/immutant/current/jboss/bin/standalone.sh&#x000A;...&#x000A;(a plethora of log messages deleted)&#x000A;...&#x000A;09:18:03,709 INFO  [org.jboss.as] (Controller Boot Thread) JBoss AS 7.1.0.Beta1 &quot;Tesla&quot; started in 2143ms - Started 149 of 211 services (61 services are passive or on-demand)&#x000A;</code></pre>
                
                <p>You can kill the Immutant with Ctrl-C.</p>
                
                <h2 id="Wrapping_up" onclick="window.location = '#Wrapping_up'">Wrapping up</h2>
                
                <p>If you&#39;ve done all of the above, you&#39;re now ready to deploy an application. We
                covered that in our <a href="/news/2011/11/08/deploying-an-application/">second tutorial</a>. </p>
                
                <p>Since Immutant is still in a pre-alpha state, none of what I
                said above is set in stone. If anything does change, We&#39;ll update this post
                to keep it accurate. </p>
                
                <p>If you have any feedback or questions, <a href="/community">get in touch</a>! </p>
              </div>
              <div class="tail">
                 <a href="/news/2011/12/21/installing-redux/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="post">
              <h2 class="title">
                <a href="/news/2011/12/05/devignition-preso/">Slides From My DevIgnition Polyglot AS Presentation</a>
              </h2>
              <div class="byline">
                <div class="author">
                  Toby Crawley
                </div>
                <div class="date">
                  Monday, December  5, 2011
                </div>
              </div>
              <div class="tags">
                <a href="/news/tags/presentations/">presentations</a>
                <a href="/news/tags/event/">event</a>
                <a href="/news/tags/polyglot/">polyglot</a>
                <a href="/news/tags/torquebox/">torquebox</a>
              </div>
              <div class="body">
                <p>This past Friday I had the pleasure of presenting &quot;The Polyglot Future of JBoss AS&quot; to an audience of 
                mostly Java developers at <a href="http://devignition.com/">DevIgnition</a>
                in <a href="http://en.wikipedia.org/wiki/Northern_Virginia">NoVA</a>.</p>
                
                <p>Thanks to <a href="http://www.linkedin.com/pub/gray-herter/a/60a/111">Gray Herter</a> for organizing a
                great conference, and to <a href="http://www.boozallen.com/">Booz Allen Hamilton</a> for sharing their
                kick-butt conference center.</p>
                
                <p>If you are interested in the code for the demo, that&#39;s <a href="https://github.com/tobias/dev-ignition-demo">here</a>.</p>
                
                <p>The talk was recorded, so once that recording is available I&#39;ll update this post to point to it.</p>
                
                <p>Here are my slides from that presentation for the enjoyment of all:</p>
                
                <div style="width:425px" id="__ss_10468066"><iframe src="http://www.slideshare.net/slideshow/embed_code/10468066" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div>
              </div>
              <div class="tail">
                 <a href="/news/2011/12/05/devignition-preso/#disqus_thread">Comments</a>
                <hr>
              </div>
            </div>
            <div class="pagination-links"><a href="/news/page/15/" class="previous-link">Previous</a> <a href="/news/" class="page-link">1</a> <a href="/news/page/2/" class="page-link">2</a> <span class="skip">...</span><a href="/news/page/15/" class="page-link">15</a> <span class="current-page">16</span> <a href="/news/page/17/" class="page-link">17</a> <a href="/news/page/17/" class="next-link">Next</a> </div>
          </div>
          <div class="span4" id="sidebar-column">
            <div class="tags">
              <div class="tag-cloud">
                <span class="tag tag-0">
                  <a href="/news/tags/announcement/">announcement</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/app-server/">app-server</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/bears/">bears</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/beginning/">beginning</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/boot/">boot</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/boot-immutant/">boot-immutant</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/caching/">caching</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/clustering/">clustering</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/daemons/">daemons</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/datomic/">datomic</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/deploy/">deploy</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/distribution/">distribution</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/enterprise/">enterprise</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/event/">event</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/first/">first</a>
                </span>
                <span class="tag tag-2">
                  <a href="/news/tags/getting-started/">getting-started</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/hotrod/">hotrod</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/infinispan/">infinispan</a>
                </span>
                <span class="tag tag-2">
                  <a href="/news/tags/installation/">installation</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/isolation/">isolation</a>
                </span>
                <span class="tag tag-2">
                  <a href="/news/tags/lein/">lein</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/lein-immutant/">lein-immutant</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/luminus/">luminus</a>
                </span>
                <span class="tag tag-2">
                  <a href="/news/tags/messaging/">messaging</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/openshift/">openshift</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/overlay/">overlay</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/pipelines/">pipelines</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/polyglot/">polyglot</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/poorsmatic/">poorsmatic</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/postgresql/">postgresql</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/presentations/">presentations</a>
                </span>
                <span class="tag tag-6">
                  <a href="/news/tags/releases/">releases</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/ring/">ring</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/runtime/">runtime</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/scheduled-jobs/">scheduled-jobs</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/scheduling/">scheduling</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/screencast/">screencast</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/slim/">slim</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/sockjs/">sockjs</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/survey/">survey</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/thedeuce/">thedeuce</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/torquebox/">torquebox</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/transactions/">transactions</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/transit/">transit</a>
                </span>
                <span class="tag tag-3">
                  <a href="/news/tags/tutorial/">tutorial</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/under-the-hood/">under-the-hood</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/vertx/">vertx</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/web/">web</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/websockets/">websockets</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/wildfly/">wildfly</a>
                </span>
                <span class="tag tag-1">
                  <a href="/news/tags/wtf/">wtf</a>
                </span>
                <span class="tag tag-0">
                  <a href="/news/tags/xa/">xa</a>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="footer-push"></div>
    </div>
    <div id="footer">
      <div class="container">
        <div class="row" id="bottom-nav">
          <div class="span8">
            <div id="legal">
              <p>The Immutant project is a member of the <a href="http://jboss.org/">JBoss
              Community</a> and produced by the
              <a href="/">Project:odd</a> team.  It is a
              community-driven open-source project, and is licensed under
              the <a href="/license-lgpl.txt">GNU LGPL</a> or <a href="/license-asl.txt">Apache Software
              License</a>, depending on the version.</p>
              
              <p>Copyright 2011 - 2017 <a href="http://redhat.com/">Red Hat, Inc.</a>
              Immutant&trade; is a trademark of Red Hat, Inc.</p>
              
              <p>Content licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
            </div>
          </div>
          <div class="span4">
            <div id="badges">
              <a href="http://jboss.org/"><img id="jbosscommunity-logo" src="/images/jbosscommunity-logo.png"></a>
              <a href="/"><img id="projectodd-logo" src="http://projectodd.org/images/projectodd-logo.png"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/javascripts/bootstrap-collapse.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-dropdown.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-tab.js" type="text/javascript"></script>
    <script>
      $( function () {
         var syntax_root = "/javascripts/jquery-syntax/"
      
         if (!$.browser.msie && $( '.syntax' ).length) {
           $.getScript( syntax_root + "jquery.syntax.min.js", function () {
             $.syntax( {root: syntax_root,
                       blockLayout: 'plain'} )
           } )
         }
       } )
    </script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-6435340-7', 'auto');
    ga('send', 'pageview');
    </script>
  </body>
</html>
